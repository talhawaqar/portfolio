{"ast":null,"code":"/*!\n * Isotope PACKAGED v3.0.6\n *\n * Licensed GPLv3 for open source use\n * or Isotope Commercial License for commercial use\n *\n * https://isotope.metafizzy.co\n * Copyright 2010-2018 Metafizzy\n */\n\n/**\n * Bridget makes jQuery widgets\n * v2.0.1\n * MIT license\n */\n\n/* jshint browser: true, strict: true, undef: true, unused: true */\nconsole.log('holaaaaaa');\n\n(function (window, factory) {\n  // universal module definition\n\n  /*jshint strict: false */\n\n  /* globals define, module, require */\n  if (typeof define == 'function' && define.amd) {\n    // AMD\n    define('jquery-bridget/jquery-bridget', ['jquery'], function (jQuery) {\n      return factory(window, jQuery);\n    });\n  } else if (typeof module == 'object' && module.exports) {\n    // CommonJS\n    module.exports = factory(window, require('jquery'));\n  } else {\n    // browser global\n    window.jQueryBridget = factory(window, window.jQuery);\n  }\n})(window, function factory(window, jQuery) {\n  'use strict'; // ----- utils ----- //\n\n  var arraySlice = Array.prototype.slice; // helper function for logging errors\n  // $.error breaks jQuery chaining\n\n  var console = window.console;\n  var logError = typeof console == 'undefined' ? function () {} : function (message) {\n    console.error(message);\n  }; // ----- jQueryBridget ----- //\n\n  function jQueryBridget(namespace, PluginClass, $) {\n    $ = $ || jQuery || window.jQuery;\n\n    if (!$) {\n      return;\n    } // add option method -> $().plugin('option', {...})\n\n\n    if (!PluginClass.prototype.option) {\n      // option setter\n      PluginClass.prototype.option = function (opts) {\n        // bail out if not an object\n        if (!$.isPlainObject(opts)) {\n          return;\n        }\n\n        this.options = $.extend(true, this.options, opts);\n      };\n    } // make jQuery plugin\n\n\n    $.fn[namespace] = function (arg0\n    /*, arg1 */\n    ) {\n      if (typeof arg0 == 'string') {\n        // method call $().plugin( 'methodName', { options } )\n        // shift arguments by 1\n        var args = arraySlice.call(arguments, 1);\n        return methodCall(this, arg0, args);\n      } // just $().plugin({ options })\n\n\n      plainCall(this, arg0);\n      return this;\n    }; // $().plugin('methodName')\n\n\n    function methodCall($elems, methodName, args) {\n      var returnValue;\n      var pluginMethodStr = '$().' + namespace + '(\"' + methodName + '\")';\n      $elems.each(function (i, elem) {\n        // get instance\n        var instance = $.data(elem, namespace);\n\n        if (!instance) {\n          logError(namespace + ' not initialized. Cannot call methods, i.e. ' + pluginMethodStr);\n          return;\n        }\n\n        var method = instance[methodName];\n\n        if (!method || methodName.charAt(0) == '_') {\n          logError(pluginMethodStr + ' is not a valid method');\n          return;\n        } // apply method, get return value\n\n\n        var value = method.apply(instance, args); // set return value if value is returned, use only first value\n\n        returnValue = returnValue === undefined ? value : returnValue;\n      });\n      return returnValue !== undefined ? returnValue : $elems;\n    }\n\n    function plainCall($elems, options) {\n      $elems.each(function (i, elem) {\n        var instance = $.data(elem, namespace);\n\n        if (instance) {\n          // set options & init\n          instance.option(options);\n\n          instance._init();\n        } else {\n          // initialize new instance\n          instance = new PluginClass(elem, options);\n          $.data(elem, namespace, instance);\n        }\n      });\n    }\n\n    updateJQuery($);\n  } // ----- updateJQuery ----- //\n  // set $.bridget for v1 backwards compatibility\n\n\n  function updateJQuery($) {\n    if (!$ || $ && $.bridget) {\n      return;\n    }\n\n    $.bridget = jQueryBridget;\n  }\n\n  updateJQuery(jQuery || window.jQuery); // -----  ----- //\n\n  return jQueryBridget;\n});\n/**\n * EvEmitter v1.1.0\n * Lil' event emitter\n * MIT License\n */\n\n/* jshint unused: true, undef: true, strict: true */\n\n\n(function (global, factory) {\n  // universal module definition\n\n  /* jshint strict: false */\n\n  /* globals define, module, window */\n  if (typeof define == 'function' && define.amd) {\n    // AMD - RequireJS\n    define('ev-emitter/ev-emitter', factory);\n  } else if (typeof module == 'object' && module.exports) {\n    // CommonJS - Browserify, Webpack\n    module.exports = factory();\n  } else {\n    // Browser globals\n    global.EvEmitter = factory();\n  }\n})(typeof window != 'undefined' ? window : this, function () {\n  function EvEmitter() {}\n\n  var proto = EvEmitter.prototype;\n\n  proto.on = function (eventName, listener) {\n    if (!eventName || !listener) {\n      return;\n    } // set events hash\n\n\n    var events = this._events = this._events || {}; // set listeners array\n\n    var listeners = events[eventName] = events[eventName] || []; // only add once\n\n    if (listeners.indexOf(listener) == -1) {\n      listeners.push(listener);\n    }\n\n    return this;\n  };\n\n  proto.once = function (eventName, listener) {\n    if (!eventName || !listener) {\n      return;\n    } // add event\n\n\n    this.on(eventName, listener); // set once flag\n    // set onceEvents hash\n\n    var onceEvents = this._onceEvents = this._onceEvents || {}; // set onceListeners object\n\n    var onceListeners = onceEvents[eventName] = onceEvents[eventName] || {}; // set flag\n\n    onceListeners[listener] = true;\n    return this;\n  };\n\n  proto.off = function (eventName, listener) {\n    var listeners = this._events && this._events[eventName];\n\n    if (!listeners || !listeners.length) {\n      return;\n    }\n\n    var index = listeners.indexOf(listener);\n\n    if (index != -1) {\n      listeners.splice(index, 1);\n    }\n\n    return this;\n  };\n\n  proto.emitEvent = function (eventName, args) {\n    var listeners = this._events && this._events[eventName];\n\n    if (!listeners || !listeners.length) {\n      return;\n    } // copy over to avoid interference if .off() in listener\n\n\n    listeners = listeners.slice(0);\n    args = args || []; // once stuff\n\n    var onceListeners = this._onceEvents && this._onceEvents[eventName];\n\n    for (var i = 0; i < listeners.length; i++) {\n      var listener = listeners[i];\n      var isOnce = onceListeners && onceListeners[listener];\n\n      if (isOnce) {\n        // remove listener\n        // remove before trigger to prevent recursion\n        this.off(eventName, listener); // unset once flag\n\n        delete onceListeners[listener];\n      } // trigger listener\n\n\n      listener.apply(this, args);\n    }\n\n    return this;\n  };\n\n  proto.allOff = function () {\n    delete this._events;\n    delete this._onceEvents;\n  };\n\n  return EvEmitter;\n});\n/*!\n * getSize v2.0.3\n * measure size of elements\n * MIT license\n */\n\n/* jshint browser: true, strict: true, undef: true, unused: true */\n\n/* globals console: false */\n\n\n(function (window, factory) {\n  /* jshint strict: false */\n\n  /* globals define, module */\n  if (typeof define == 'function' && define.amd) {\n    // AMD\n    define('get-size/get-size', factory);\n  } else if (typeof module == 'object' && module.exports) {\n    // CommonJS\n    module.exports = factory();\n  } else {\n    // browser global\n    window.getSize = factory();\n  }\n})(window, function factory() {\n  'use strict'; // -------------------------- helpers -------------------------- //\n  // get a number from a string, not a percentage\n\n  function getStyleSize(value) {\n    var num = parseFloat(value); // not a percent like '100%', and a number\n\n    var isValid = value.indexOf('%') == -1 && !isNaN(num);\n    return isValid && num;\n  }\n\n  function noop() {}\n\n  var logError = typeof console == 'undefined' ? noop : function (message) {\n    console.error(message);\n  }; // -------------------------- measurements -------------------------- //\n\n  var measurements = ['paddingLeft', 'paddingRight', 'paddingTop', 'paddingBottom', 'marginLeft', 'marginRight', 'marginTop', 'marginBottom', 'borderLeftWidth', 'borderRightWidth', 'borderTopWidth', 'borderBottomWidth'];\n  var measurementsLength = measurements.length;\n\n  function getZeroSize() {\n    var size = {\n      width: 0,\n      height: 0,\n      innerWidth: 0,\n      innerHeight: 0,\n      outerWidth: 0,\n      outerHeight: 0\n    };\n\n    for (var i = 0; i < measurementsLength; i++) {\n      var measurement = measurements[i];\n      size[measurement] = 0;\n    }\n\n    return size;\n  } // -------------------------- getStyle -------------------------- //\n\n  /**\n   * getStyle, get style of element, check for Firefox bug\n   * https://bugzilla.mozilla.org/show_bug.cgi?id=548397\n   */\n\n\n  function getStyle(elem) {\n    var style = getComputedStyle(elem);\n\n    if (!style) {\n      logError('Style returned ' + style + '. Are you running this code in a hidden iframe on Firefox? ' + 'See https://bit.ly/getsizebug1');\n    }\n\n    return style;\n  } // -------------------------- setup -------------------------- //\n\n\n  var isSetup = false;\n  var isBoxSizeOuter;\n  /**\n   * setup\n   * check isBoxSizerOuter\n   * do on first getSize() rather than on page load for Firefox bug\n   */\n\n  function setup() {\n    // setup once\n    if (isSetup) {\n      return;\n    }\n\n    isSetup = true; // -------------------------- box sizing -------------------------- //\n\n    /**\n     * Chrome & Safari measure the outer-width on style.width on border-box elems\n     * IE11 & Firefox<29 measures the inner-width\n     */\n\n    var div = document.createElement('div');\n    div.style.width = '200px';\n    div.style.padding = '1px 2px 3px 4px';\n    div.style.borderStyle = 'solid';\n    div.style.borderWidth = '1px 2px 3px 4px';\n    div.style.boxSizing = 'border-box';\n    var body = document.body || document.documentElement;\n    body.appendChild(div);\n    var style = getStyle(div); // round value for browser zoom. desandro/masonry#928\n\n    isBoxSizeOuter = Math.round(getStyleSize(style.width)) == 200;\n    getSize.isBoxSizeOuter = isBoxSizeOuter;\n    body.removeChild(div);\n  } // -------------------------- getSize -------------------------- //\n\n\n  function getSize(elem) {\n    setup(); // use querySeletor if elem is string\n\n    if (typeof elem == 'string') {\n      elem = document.querySelector(elem);\n    } // do not proceed on non-objects\n\n\n    if (!elem || typeof elem != 'object' || !elem.nodeType) {\n      return;\n    }\n\n    var style = getStyle(elem); // if hidden, everything is 0\n\n    if (style.display == 'none') {\n      return getZeroSize();\n    }\n\n    var size = {};\n    size.width = elem.offsetWidth;\n    size.height = elem.offsetHeight;\n    var isBorderBox = size.isBorderBox = style.boxSizing == 'border-box'; // get all measurements\n\n    for (var i = 0; i < measurementsLength; i++) {\n      var measurement = measurements[i];\n      var value = style[measurement];\n      var num = parseFloat(value); // any 'auto', 'medium' value will be 0\n\n      size[measurement] = !isNaN(num) ? num : 0;\n    }\n\n    var paddingWidth = size.paddingLeft + size.paddingRight;\n    var paddingHeight = size.paddingTop + size.paddingBottom;\n    var marginWidth = size.marginLeft + size.marginRight;\n    var marginHeight = size.marginTop + size.marginBottom;\n    var borderWidth = size.borderLeftWidth + size.borderRightWidth;\n    var borderHeight = size.borderTopWidth + size.borderBottomWidth;\n    var isBorderBoxSizeOuter = isBorderBox && isBoxSizeOuter; // overwrite width and height if we can get it from style\n\n    var styleWidth = getStyleSize(style.width);\n\n    if (styleWidth !== false) {\n      size.width = styleWidth + ( // add padding and border unless it's already including it\n      isBorderBoxSizeOuter ? 0 : paddingWidth + borderWidth);\n    }\n\n    var styleHeight = getStyleSize(style.height);\n\n    if (styleHeight !== false) {\n      size.height = styleHeight + ( // add padding and border unless it's already including it\n      isBorderBoxSizeOuter ? 0 : paddingHeight + borderHeight);\n    }\n\n    size.innerWidth = size.width - (paddingWidth + borderWidth);\n    size.innerHeight = size.height - (paddingHeight + borderHeight);\n    size.outerWidth = size.width + marginWidth;\n    size.outerHeight = size.height + marginHeight;\n    return size;\n  }\n\n  return getSize;\n});\n/**\n * matchesSelector v2.0.2\n * matchesSelector( element, '.selector' )\n * MIT license\n */\n\n/*jshint browser: true, strict: true, undef: true, unused: true */\n\n\n(function (window, factory) {\n  /*global define: false, module: false */\n  'use strict'; // universal module definition\n\n  if (typeof define == 'function' && define.amd) {\n    // AMD\n    define('desandro-matches-selector/matches-selector', factory);\n  } else if (typeof module == 'object' && module.exports) {\n    // CommonJS\n    module.exports = factory();\n  } else {\n    // browser global\n    window.matchesSelector = factory();\n  }\n})(window, function factory() {\n  'use strict';\n\n  var matchesMethod = function () {\n    var ElemProto = window.Element.prototype; // check for the standard method name first\n\n    if (ElemProto.matches) {\n      return 'matches';\n    } // check un-prefixed\n\n\n    if (ElemProto.matchesSelector) {\n      return 'matchesSelector';\n    } // check vendor prefixes\n\n\n    var prefixes = ['webkit', 'moz', 'ms', 'o'];\n\n    for (var i = 0; i < prefixes.length; i++) {\n      var prefix = prefixes[i];\n      var method = prefix + 'MatchesSelector';\n\n      if (ElemProto[method]) {\n        return method;\n      }\n    }\n  }();\n\n  return function matchesSelector(elem, selector) {\n    return elem[matchesMethod](selector);\n  };\n});\n/**\n * Fizzy UI utils v2.0.7\n * MIT license\n */\n\n/*jshint browser: true, undef: true, unused: true, strict: true */\n\n\n(function (window, factory) {\n  // universal module definition\n\n  /*jshint strict: false */\n\n  /*globals define, module, require */\n  if (typeof define == 'function' && define.amd) {\n    // AMD\n    define('fizzy-ui-utils/utils', ['desandro-matches-selector/matches-selector'], function (matchesSelector) {\n      return factory(window, matchesSelector);\n    });\n  } else if (typeof module == 'object' && module.exports) {\n    // CommonJS\n    module.exports = factory(window, require('desandro-matches-selector'));\n  } else {\n    // browser global\n    window.fizzyUIUtils = factory(window, window.matchesSelector);\n  }\n})(window, function factory(window, matchesSelector) {\n  var utils = {}; // ----- extend ----- //\n  // extends objects\n\n  utils.extend = function (a, b) {\n    for (var prop in b) {\n      a[prop] = b[prop];\n    }\n\n    return a;\n  }; // ----- modulo ----- //\n\n\n  utils.modulo = function (num, div) {\n    return (num % div + div) % div;\n  }; // ----- makeArray ----- //\n\n\n  var arraySlice = Array.prototype.slice; // turn element or nodeList into an array\n\n  utils.makeArray = function (obj) {\n    if (Array.isArray(obj)) {\n      // use object if already an array\n      return obj;\n    } // return empty array if undefined or null. #6\n\n\n    if (obj === null || obj === undefined) {\n      return [];\n    }\n\n    var isArrayLike = typeof obj == 'object' && typeof obj.length == 'number';\n\n    if (isArrayLike) {\n      // convert nodeList to array\n      return arraySlice.call(obj);\n    } // array of single index\n\n\n    return [obj];\n  }; // ----- removeFrom ----- //\n\n\n  utils.removeFrom = function (ary, obj) {\n    var index = ary.indexOf(obj);\n\n    if (index != -1) {\n      ary.splice(index, 1);\n    }\n  }; // ----- getParent ----- //\n\n\n  utils.getParent = function (elem, selector) {\n    while (elem.parentNode && elem != document.body) {\n      elem = elem.parentNode;\n\n      if (matchesSelector(elem, selector)) {\n        return elem;\n      }\n    }\n  }; // ----- getQueryElement ----- //\n  // use element as selector string\n\n\n  utils.getQueryElement = function (elem) {\n    if (typeof elem == 'string') {\n      return document.querySelector(elem);\n    }\n\n    return elem;\n  }; // ----- handleEvent ----- //\n  // enable .ontype to trigger from .addEventListener( elem, 'type' )\n\n\n  utils.handleEvent = function (event) {\n    var method = 'on' + event.type;\n\n    if (this[method]) {\n      this[method](event);\n    }\n  }; // ----- filterFindElements ----- //\n\n\n  utils.filterFindElements = function (elems, selector) {\n    // make array of elems\n    elems = utils.makeArray(elems);\n    var ffElems = [];\n    elems.forEach(function (elem) {\n      // check that elem is an actual element\n      if (!(elem instanceof HTMLElement)) {\n        return;\n      } // add elem if no selector\n\n\n      if (!selector) {\n        ffElems.push(elem);\n        return;\n      } // filter & find items if we have a selector\n      // filter\n\n\n      if (matchesSelector(elem, selector)) {\n        ffElems.push(elem);\n      } // find children\n\n\n      var childElems = elem.querySelectorAll(selector); // concat childElems to filterFound array\n\n      for (var i = 0; i < childElems.length; i++) {\n        ffElems.push(childElems[i]);\n      }\n    });\n    return ffElems;\n  }; // ----- debounceMethod ----- //\n\n\n  utils.debounceMethod = function (_class, methodName, threshold) {\n    threshold = threshold || 100; // original method\n\n    var method = _class.prototype[methodName];\n    var timeoutName = methodName + 'Timeout';\n\n    _class.prototype[methodName] = function () {\n      var timeout = this[timeoutName];\n      clearTimeout(timeout);\n      var args = arguments;\n\n      var _this = this;\n\n      this[timeoutName] = setTimeout(function () {\n        method.apply(_this, args);\n        delete _this[timeoutName];\n      }, threshold);\n    };\n  }; // ----- docReady ----- //\n\n\n  utils.docReady = function (callback) {\n    var readyState = document.readyState;\n\n    if (readyState == 'complete' || readyState == 'interactive') {\n      // do async to allow for other scripts to run. metafizzy/flickity#441\n      setTimeout(callback);\n    } else {\n      document.addEventListener('DOMContentLoaded', callback);\n    }\n  }; // ----- htmlInit ----- //\n  // http://jamesroberts.name/blog/2010/02/22/string-functions-for-javascript-trim-to-camel-case-to-dashed-and-to-underscore/\n\n\n  utils.toDashed = function (str) {\n    return str.replace(/(.)([A-Z])/g, function (match, $1, $2) {\n      return $1 + '-' + $2;\n    }).toLowerCase();\n  };\n\n  var console = window.console;\n  /**\n   * allow user to initialize classes via [data-namespace] or .js-namespace class\n   * htmlInit( Widget, 'widgetName' )\n   * options are parsed from data-namespace-options\n   */\n\n  utils.htmlInit = function (WidgetClass, namespace) {\n    utils.docReady(function () {\n      var dashedNamespace = utils.toDashed(namespace);\n      var dataAttr = 'data-' + dashedNamespace;\n      var dataAttrElems = document.querySelectorAll('[' + dataAttr + ']');\n      var jsDashElems = document.querySelectorAll('.js-' + dashedNamespace);\n      var elems = utils.makeArray(dataAttrElems).concat(utils.makeArray(jsDashElems));\n      var dataOptionsAttr = dataAttr + '-options';\n      var jQuery = window.jQuery;\n      elems.forEach(function (elem) {\n        var attr = elem.getAttribute(dataAttr) || elem.getAttribute(dataOptionsAttr);\n        var options;\n\n        try {\n          options = attr && JSON.parse(attr);\n        } catch (error) {\n          // log error, do not initialize\n          if (console) {\n            console.error('Error parsing ' + dataAttr + ' on ' + elem.className + ': ' + error);\n          }\n\n          return;\n        } // initialize\n\n\n        var instance = new WidgetClass(elem, options); // make available via $().data('namespace')\n\n        if (jQuery) {\n          jQuery.data(elem, namespace, instance);\n        }\n      });\n    });\n  }; // -----  ----- //\n\n\n  return utils;\n});\n/**\n * Outlayer Item\n */\n\n\n(function (window, factory) {\n  // universal module definition\n\n  /* jshint strict: false */\n\n  /* globals define, module, require */\n  if (typeof define == 'function' && define.amd) {\n    // AMD - RequireJS\n    define('outlayer/item', ['ev-emitter/ev-emitter', 'get-size/get-size'], factory);\n  } else if (typeof module == 'object' && module.exports) {\n    // CommonJS - Browserify, Webpack\n    module.exports = factory(require('ev-emitter'), require('get-size'));\n  } else {\n    // browser global\n    window.Outlayer = {};\n    window.Outlayer.Item = factory(window.EvEmitter, window.getSize);\n  }\n})(window, function factory(EvEmitter, getSize) {\n  'use strict'; // ----- helpers ----- //\n\n  function isEmptyObj(obj) {\n    for (var prop in obj) {\n      return false;\n    }\n\n    prop = null;\n    return true;\n  } // -------------------------- CSS3 support -------------------------- //\n\n\n  var docElemStyle = document.documentElement.style;\n  var transitionProperty = typeof docElemStyle.transition == 'string' ? 'transition' : 'WebkitTransition';\n  var transformProperty = typeof docElemStyle.transform == 'string' ? 'transform' : 'WebkitTransform';\n  var transitionEndEvent = {\n    WebkitTransition: 'webkitTransitionEnd',\n    transition: 'transitionend'\n  }[transitionProperty]; // cache all vendor properties that could have vendor prefix\n\n  var vendorProperties = {\n    transform: transformProperty,\n    transition: transitionProperty,\n    transitionDuration: transitionProperty + 'Duration',\n    transitionProperty: transitionProperty + 'Property',\n    transitionDelay: transitionProperty + 'Delay'\n  }; // -------------------------- Item -------------------------- //\n\n  function Item(element, layout) {\n    if (!element) {\n      return;\n    }\n\n    this.element = element; // parent layout class, i.e. Masonry, Isotope, or Packery\n\n    this.layout = layout;\n    this.position = {\n      x: 0,\n      y: 0\n    };\n\n    this._create();\n  } // inherit EvEmitter\n\n\n  var proto = Item.prototype = Object.create(EvEmitter.prototype);\n  proto.constructor = Item;\n\n  proto._create = function () {\n    // transition objects\n    this._transn = {\n      ingProperties: {},\n      clean: {},\n      onEnd: {}\n    };\n    this.css({\n      position: 'absolute'\n    });\n  }; // trigger specified handler for event type\n\n\n  proto.handleEvent = function (event) {\n    var method = 'on' + event.type;\n\n    if (this[method]) {\n      this[method](event);\n    }\n  };\n\n  proto.getSize = function () {\n    this.size = getSize(this.element);\n  };\n  /**\n   * apply CSS styles to element\n   * @param {Object} style\n   */\n\n\n  proto.css = function (style) {\n    var elemStyle = this.element.style;\n\n    for (var prop in style) {\n      // use vendor property if available\n      var supportedProp = vendorProperties[prop] || prop;\n      elemStyle[supportedProp] = style[prop];\n    }\n  }; // measure position, and sets it\n\n\n  proto.getPosition = function () {\n    var style = getComputedStyle(this.element);\n\n    var isOriginLeft = this.layout._getOption('originLeft');\n\n    var isOriginTop = this.layout._getOption('originTop');\n\n    var xValue = style[isOriginLeft ? 'left' : 'right'];\n    var yValue = style[isOriginTop ? 'top' : 'bottom'];\n    var x = parseFloat(xValue);\n    var y = parseFloat(yValue); // convert percent to pixels\n\n    var layoutSize = this.layout.size;\n\n    if (xValue.indexOf('%') != -1) {\n      x = x / 100 * layoutSize.width;\n    }\n\n    if (yValue.indexOf('%') != -1) {\n      y = y / 100 * layoutSize.height;\n    } // clean up 'auto' or other non-integer values\n\n\n    x = isNaN(x) ? 0 : x;\n    y = isNaN(y) ? 0 : y; // remove padding from measurement\n\n    x -= isOriginLeft ? layoutSize.paddingLeft : layoutSize.paddingRight;\n    y -= isOriginTop ? layoutSize.paddingTop : layoutSize.paddingBottom;\n    this.position.x = x;\n    this.position.y = y;\n  }; // set settled position, apply padding\n\n\n  proto.layoutPosition = function () {\n    var layoutSize = this.layout.size;\n    var style = {};\n\n    var isOriginLeft = this.layout._getOption('originLeft');\n\n    var isOriginTop = this.layout._getOption('originTop'); // x\n\n\n    var xPadding = isOriginLeft ? 'paddingLeft' : 'paddingRight';\n    var xProperty = isOriginLeft ? 'left' : 'right';\n    var xResetProperty = isOriginLeft ? 'right' : 'left';\n    var x = this.position.x + layoutSize[xPadding]; // set in percentage or pixels\n\n    style[xProperty] = this.getXValue(x); // reset other property\n\n    style[xResetProperty] = ''; // y\n\n    var yPadding = isOriginTop ? 'paddingTop' : 'paddingBottom';\n    var yProperty = isOriginTop ? 'top' : 'bottom';\n    var yResetProperty = isOriginTop ? 'bottom' : 'top';\n    var y = this.position.y + layoutSize[yPadding]; // set in percentage or pixels\n\n    style[yProperty] = this.getYValue(y); // reset other property\n\n    style[yResetProperty] = '';\n    this.css(style);\n    this.emitEvent('layout', [this]);\n  };\n\n  proto.getXValue = function (x) {\n    var isHorizontal = this.layout._getOption('horizontal');\n\n    return this.layout.options.percentPosition && !isHorizontal ? x / this.layout.size.width * 100 + '%' : x + 'px';\n  };\n\n  proto.getYValue = function (y) {\n    var isHorizontal = this.layout._getOption('horizontal');\n\n    return this.layout.options.percentPosition && isHorizontal ? y / this.layout.size.height * 100 + '%' : y + 'px';\n  };\n\n  proto._transitionTo = function (x, y) {\n    this.getPosition(); // get current x & y from top/left\n\n    var curX = this.position.x;\n    var curY = this.position.y;\n    var didNotMove = x == this.position.x && y == this.position.y; // save end position\n\n    this.setPosition(x, y); // if did not move and not transitioning, just go to layout\n\n    if (didNotMove && !this.isTransitioning) {\n      this.layoutPosition();\n      return;\n    }\n\n    var transX = x - curX;\n    var transY = y - curY;\n    var transitionStyle = {};\n    transitionStyle.transform = this.getTranslate(transX, transY);\n    this.transition({\n      to: transitionStyle,\n      onTransitionEnd: {\n        transform: this.layoutPosition\n      },\n      isCleaning: true\n    });\n  };\n\n  proto.getTranslate = function (x, y) {\n    // flip cooridinates if origin on right or bottom\n    var isOriginLeft = this.layout._getOption('originLeft');\n\n    var isOriginTop = this.layout._getOption('originTop');\n\n    x = isOriginLeft ? x : -x;\n    y = isOriginTop ? y : -y;\n    return 'translate3d(' + x + 'px, ' + y + 'px, 0)';\n  }; // non transition + transform support\n\n\n  proto.goTo = function (x, y) {\n    this.setPosition(x, y);\n    this.layoutPosition();\n  };\n\n  proto.moveTo = proto._transitionTo;\n\n  proto.setPosition = function (x, y) {\n    this.position.x = parseFloat(x);\n    this.position.y = parseFloat(y);\n  }; // ----- transition ----- //\n\n  /**\n   * @param {Object} style - CSS\n   * @param {Function} onTransitionEnd\n   */\n  // non transition, just trigger callback\n\n\n  proto._nonTransition = function (args) {\n    this.css(args.to);\n\n    if (args.isCleaning) {\n      this._removeStyles(args.to);\n    }\n\n    for (var prop in args.onTransitionEnd) {\n      args.onTransitionEnd[prop].call(this);\n    }\n  };\n  /**\n   * proper transition\n   * @param {Object} args - arguments\n   *   @param {Object} to - style to transition to\n   *   @param {Object} from - style to start transition from\n   *   @param {Boolean} isCleaning - removes transition styles after transition\n   *   @param {Function} onTransitionEnd - callback\n   */\n\n\n  proto.transition = function (args) {\n    // redirect to nonTransition if no transition duration\n    if (!parseFloat(this.layout.options.transitionDuration)) {\n      this._nonTransition(args);\n\n      return;\n    }\n\n    var _transition = this._transn; // keep track of onTransitionEnd callback by css property\n\n    for (var prop in args.onTransitionEnd) {\n      _transition.onEnd[prop] = args.onTransitionEnd[prop];\n    } // keep track of properties that are transitioning\n\n\n    for (prop in args.to) {\n      _transition.ingProperties[prop] = true; // keep track of properties to clean up when transition is done\n\n      if (args.isCleaning) {\n        _transition.clean[prop] = true;\n      }\n    } // set from styles\n\n\n    if (args.from) {\n      this.css(args.from); // force redraw. http://blog.alexmaccaw.com/css-transitions\n\n      var h = this.element.offsetHeight; // hack for JSHint to hush about unused var\n\n      h = null;\n    } // enable transition\n\n\n    this.enableTransition(args.to); // set styles that are transitioning\n\n    this.css(args.to);\n    this.isTransitioning = true;\n  }; // dash before all cap letters, including first for\n  // WebkitTransform => -webkit-transform\n\n\n  function toDashedAll(str) {\n    return str.replace(/([A-Z])/g, function ($1) {\n      return '-' + $1.toLowerCase();\n    });\n  }\n\n  var transitionProps = 'opacity,' + toDashedAll(transformProperty);\n\n  proto.enableTransition = function ()\n  /* style */\n  {\n    // HACK changing transitionProperty during a transition\n    // will cause transition to jump\n    if (this.isTransitioning) {\n      return;\n    } // make `transition: foo, bar, baz` from style object\n    // HACK un-comment this when enableTransition can work\n    // while a transition is happening\n    // var transitionValues = [];\n    // for ( var prop in style ) {\n    //   // dash-ify camelCased properties like WebkitTransition\n    //   prop = vendorProperties[ prop ] || prop;\n    //   transitionValues.push( toDashedAll( prop ) );\n    // }\n    // munge number to millisecond, to match stagger\n\n\n    var duration = this.layout.options.transitionDuration;\n    duration = typeof duration == 'number' ? duration + 'ms' : duration; // enable transition styles\n\n    this.css({\n      transitionProperty: transitionProps,\n      transitionDuration: duration,\n      transitionDelay: this.staggerDelay || 0\n    }); // listen for transition end event\n\n    this.element.addEventListener(transitionEndEvent, this, false);\n  }; // ----- events ----- //\n\n\n  proto.onwebkitTransitionEnd = function (event) {\n    this.ontransitionend(event);\n  };\n\n  proto.onotransitionend = function (event) {\n    this.ontransitionend(event);\n  }; // properties that I munge to make my life easier\n\n\n  var dashedVendorProperties = {\n    '-webkit-transform': 'transform'\n  };\n\n  proto.ontransitionend = function (event) {\n    // disregard bubbled events from children\n    if (event.target !== this.element) {\n      return;\n    }\n\n    var _transition = this._transn; // get property name of transitioned property, convert to prefix-free\n\n    var propertyName = dashedVendorProperties[event.propertyName] || event.propertyName; // remove property that has completed transitioning\n\n    delete _transition.ingProperties[propertyName]; // check if any properties are still transitioning\n\n    if (isEmptyObj(_transition.ingProperties)) {\n      // all properties have completed transitioning\n      this.disableTransition();\n    } // clean style\n\n\n    if (propertyName in _transition.clean) {\n      // clean up style\n      this.element.style[event.propertyName] = '';\n      delete _transition.clean[propertyName];\n    } // trigger onTransitionEnd callback\n\n\n    if (propertyName in _transition.onEnd) {\n      var onTransitionEnd = _transition.onEnd[propertyName];\n      onTransitionEnd.call(this);\n      delete _transition.onEnd[propertyName];\n    }\n\n    this.emitEvent('transitionEnd', [this]);\n  };\n\n  proto.disableTransition = function () {\n    this.removeTransitionStyles();\n    this.element.removeEventListener(transitionEndEvent, this, false);\n    this.isTransitioning = false;\n  };\n  /**\n   * removes style property from element\n   * @param {Object} style\n  **/\n\n\n  proto._removeStyles = function (style) {\n    // clean up transition styles\n    var cleanStyle = {};\n\n    for (var prop in style) {\n      cleanStyle[prop] = '';\n    }\n\n    this.css(cleanStyle);\n  };\n\n  var cleanTransitionStyle = {\n    transitionProperty: '',\n    transitionDuration: '',\n    transitionDelay: ''\n  };\n\n  proto.removeTransitionStyles = function () {\n    // remove transition\n    this.css(cleanTransitionStyle);\n  }; // ----- stagger ----- //\n\n\n  proto.stagger = function (delay) {\n    delay = isNaN(delay) ? 0 : delay;\n    this.staggerDelay = delay + 'ms';\n  }; // ----- show/hide/remove ----- //\n  // remove element from DOM\n\n\n  proto.removeElem = function () {\n    this.element.parentNode.removeChild(this.element); // remove display: none\n\n    this.css({\n      display: ''\n    });\n    this.emitEvent('remove', [this]);\n  };\n\n  proto.remove = function () {\n    // just remove element if no transition support or no transition\n    if (!transitionProperty || !parseFloat(this.layout.options.transitionDuration)) {\n      this.removeElem();\n      return;\n    } // start transition\n\n\n    this.once('transitionEnd', function () {\n      this.removeElem();\n    });\n    this.hide();\n  };\n\n  proto.reveal = function () {\n    delete this.isHidden; // remove display: none\n\n    this.css({\n      display: ''\n    });\n    var options = this.layout.options;\n    var onTransitionEnd = {};\n    var transitionEndProperty = this.getHideRevealTransitionEndProperty('visibleStyle');\n    onTransitionEnd[transitionEndProperty] = this.onRevealTransitionEnd;\n    this.transition({\n      from: options.hiddenStyle,\n      to: options.visibleStyle,\n      isCleaning: true,\n      onTransitionEnd: onTransitionEnd\n    });\n  };\n\n  proto.onRevealTransitionEnd = function () {\n    // check if still visible\n    // during transition, item may have been hidden\n    if (!this.isHidden) {\n      this.emitEvent('reveal');\n    }\n  };\n  /**\n   * get style property use for hide/reveal transition end\n   * @param {String} styleProperty - hiddenStyle/visibleStyle\n   * @returns {String}\n   */\n\n\n  proto.getHideRevealTransitionEndProperty = function (styleProperty) {\n    var optionStyle = this.layout.options[styleProperty]; // use opacity\n\n    if (optionStyle.opacity) {\n      return 'opacity';\n    } // get first property\n\n\n    for (var prop in optionStyle) {\n      return prop;\n    }\n  };\n\n  proto.hide = function () {\n    // set flag\n    this.isHidden = true; // remove display: none\n\n    this.css({\n      display: ''\n    });\n    var options = this.layout.options;\n    var onTransitionEnd = {};\n    var transitionEndProperty = this.getHideRevealTransitionEndProperty('hiddenStyle');\n    onTransitionEnd[transitionEndProperty] = this.onHideTransitionEnd;\n    this.transition({\n      from: options.visibleStyle,\n      to: options.hiddenStyle,\n      // keep hidden stuff hidden\n      isCleaning: true,\n      onTransitionEnd: onTransitionEnd\n    });\n  };\n\n  proto.onHideTransitionEnd = function () {\n    // check if still hidden\n    // during transition, item may have been un-hidden\n    if (this.isHidden) {\n      this.css({\n        display: 'none'\n      });\n      this.emitEvent('hide');\n    }\n  };\n\n  proto.destroy = function () {\n    this.css({\n      position: '',\n      left: '',\n      right: '',\n      top: '',\n      bottom: '',\n      transition: '',\n      transform: ''\n    });\n  };\n\n  return Item;\n});\n/*!\n * Outlayer v2.1.1\n * the brains and guts of a layout library\n * MIT license\n */\n\n\n(function (window, factory) {\n  'use strict'; // universal module definition\n\n  /* jshint strict: false */\n\n  /* globals define, module, require */\n\n  if (typeof define == 'function' && define.amd) {\n    // AMD - RequireJS\n    define('outlayer/outlayer', ['ev-emitter/ev-emitter', 'get-size/get-size', 'fizzy-ui-utils/utils', './item'], function (EvEmitter, getSize, utils, Item) {\n      return factory(window, EvEmitter, getSize, utils, Item);\n    });\n  } else if (typeof module == 'object' && module.exports) {\n    // CommonJS - Browserify, Webpack\n    module.exports = factory(window, require('ev-emitter'), require('get-size'), require('fizzy-ui-utils'), require('./item'));\n  } else {\n    // browser global\n    window.Outlayer = factory(window, window.EvEmitter, window.getSize, window.fizzyUIUtils, window.Outlayer.Item);\n  }\n})(window, function factory(window, EvEmitter, getSize, utils, Item) {\n  'use strict'; // ----- vars ----- //\n\n  var console = window.console;\n  var jQuery = window.jQuery;\n\n  var noop = function noop() {}; // -------------------------- Outlayer -------------------------- //\n  // globally unique identifiers\n\n\n  var GUID = 0; // internal store of all Outlayer intances\n\n  var instances = {};\n  /**\n   * @param {Element, String} element\n   * @param {Object} options\n   * @constructor\n   */\n\n  function Outlayer(element, options) {\n    var queryElement = utils.getQueryElement(element);\n\n    if (!queryElement) {\n      if (console) {\n        console.error('Bad element for ' + this.constructor.namespace + ': ' + (queryElement || element));\n      }\n\n      return;\n    }\n\n    this.element = queryElement; // add jQuery\n\n    if (jQuery) {\n      this.$element = jQuery(this.element);\n    } // options\n\n\n    this.options = utils.extend({}, this.constructor.defaults);\n    this.option(options); // add id for Outlayer.getFromElement\n\n    var id = ++GUID;\n    this.element.outlayerGUID = id; // expando\n\n    instances[id] = this; // associate via id\n    // kick it off\n\n    this._create();\n\n    var isInitLayout = this._getOption('initLayout');\n\n    if (isInitLayout) {\n      this.layout();\n    }\n  } // settings are for internal use only\n\n\n  Outlayer.namespace = 'outlayer';\n  Outlayer.Item = Item; // default options\n\n  Outlayer.defaults = {\n    containerStyle: {\n      position: 'relative'\n    },\n    initLayout: true,\n    originLeft: true,\n    originTop: true,\n    resize: true,\n    resizeContainer: true,\n    // item options\n    transitionDuration: '0.4s',\n    hiddenStyle: {\n      opacity: 0,\n      transform: 'scale(0.001)'\n    },\n    visibleStyle: {\n      opacity: 1,\n      transform: 'scale(1)'\n    }\n  };\n  var proto = Outlayer.prototype; // inherit EvEmitter\n\n  utils.extend(proto, EvEmitter.prototype);\n  /**\n   * set options\n   * @param {Object} opts\n   */\n\n  proto.option = function (opts) {\n    utils.extend(this.options, opts);\n  };\n  /**\n   * get backwards compatible option value, check old name\n   */\n\n\n  proto._getOption = function (option) {\n    var oldOption = this.constructor.compatOptions[option];\n    return oldOption && this.options[oldOption] !== undefined ? this.options[oldOption] : this.options[option];\n  };\n\n  Outlayer.compatOptions = {\n    // currentName: oldName\n    initLayout: 'isInitLayout',\n    horizontal: 'isHorizontal',\n    layoutInstant: 'isLayoutInstant',\n    originLeft: 'isOriginLeft',\n    originTop: 'isOriginTop',\n    resize: 'isResizeBound',\n    resizeContainer: 'isResizingContainer'\n  };\n\n  proto._create = function () {\n    // get items from children\n    this.reloadItems(); // elements that affect layout, but are not laid out\n\n    this.stamps = [];\n    this.stamp(this.options.stamp); // set container style\n\n    utils.extend(this.element.style, this.options.containerStyle); // bind resize method\n\n    var canBindResize = this._getOption('resize');\n\n    if (canBindResize) {\n      this.bindResize();\n    }\n  }; // goes through all children again and gets bricks in proper order\n\n\n  proto.reloadItems = function () {\n    // collection of item elements\n    this.items = this._itemize(this.element.children);\n  };\n  /**\n   * turn elements into Outlayer.Items to be used in layout\n   * @param {Array or NodeList or HTMLElement} elems\n   * @returns {Array} items - collection of new Outlayer Items\n   */\n\n\n  proto._itemize = function (elems) {\n    var itemElems = this._filterFindItemElements(elems);\n\n    var Item = this.constructor.Item; // create new Outlayer Items for collection\n\n    var items = [];\n\n    for (var i = 0; i < itemElems.length; i++) {\n      var elem = itemElems[i];\n      var item = new Item(elem, this);\n      items.push(item);\n    }\n\n    return items;\n  };\n  /**\n   * get item elements to be used in layout\n   * @param {Array or NodeList or HTMLElement} elems\n   * @returns {Array} items - item elements\n   */\n\n\n  proto._filterFindItemElements = function (elems) {\n    return utils.filterFindElements(elems, this.options.itemSelector);\n  };\n  /**\n   * getter method for getting item elements\n   * @returns {Array} elems - collection of item elements\n   */\n\n\n  proto.getItemElements = function () {\n    return this.items.map(function (item) {\n      return item.element;\n    });\n  }; // ----- init & layout ----- //\n\n  /**\n   * lays out all items\n   */\n\n\n  proto.layout = function () {\n    this._resetLayout();\n\n    this._manageStamps(); // don't animate first layout\n\n\n    var layoutInstant = this._getOption('layoutInstant');\n\n    var isInstant = layoutInstant !== undefined ? layoutInstant : !this._isLayoutInited;\n    this.layoutItems(this.items, isInstant); // flag for initalized\n\n    this._isLayoutInited = true;\n  }; // _init is alias for layout\n\n\n  proto._init = proto.layout;\n  /**\n   * logic before any new layout\n   */\n\n  proto._resetLayout = function () {\n    this.getSize();\n  };\n\n  proto.getSize = function () {\n    this.size = getSize(this.element);\n  };\n  /**\n   * get measurement from option, for columnWidth, rowHeight, gutter\n   * if option is String -> get element from selector string, & get size of element\n   * if option is Element -> get size of element\n   * else use option as a number\n   *\n   * @param {String} measurement\n   * @param {String} size - width or height\n   * @private\n   */\n\n\n  proto._getMeasurement = function (measurement, size) {\n    var option = this.options[measurement];\n    var elem;\n\n    if (!option) {\n      // default to 0\n      this[measurement] = 0;\n    } else {\n      // use option as an element\n      if (typeof option == 'string') {\n        elem = this.element.querySelector(option);\n      } else if (option instanceof HTMLElement) {\n        elem = option;\n      } // use size of element, if element\n\n\n      this[measurement] = elem ? getSize(elem)[size] : option;\n    }\n  };\n  /**\n   * layout a collection of item elements\n   * @api public\n   */\n\n\n  proto.layoutItems = function (items, isInstant) {\n    items = this._getItemsForLayout(items);\n\n    this._layoutItems(items, isInstant);\n\n    this._postLayout();\n  };\n  /**\n   * get the items to be laid out\n   * you may want to skip over some items\n   * @param {Array} items\n   * @returns {Array} items\n   */\n\n\n  proto._getItemsForLayout = function (items) {\n    return items.filter(function (item) {\n      return !item.isIgnored;\n    });\n  };\n  /**\n   * layout items\n   * @param {Array} items\n   * @param {Boolean} isInstant\n   */\n\n\n  proto._layoutItems = function (items, isInstant) {\n    this._emitCompleteOnItems('layout', items);\n\n    if (!items || !items.length) {\n      // no items, emit event with empty array\n      return;\n    }\n\n    var queue = [];\n    items.forEach(function (item) {\n      // get x/y object from method\n      var position = this._getItemLayoutPosition(item); // enqueue\n\n\n      position.item = item;\n      position.isInstant = isInstant || item.isLayoutInstant;\n      queue.push(position);\n    }, this);\n\n    this._processLayoutQueue(queue);\n  };\n  /**\n   * get item layout position\n   * @param {Outlayer.Item} item\n   * @returns {Object} x and y position\n   */\n\n\n  proto._getItemLayoutPosition = function ()\n  /* item */\n  {\n    return {\n      x: 0,\n      y: 0\n    };\n  };\n  /**\n   * iterate over array and position each item\n   * Reason being - separating this logic prevents 'layout invalidation'\n   * thx @paul_irish\n   * @param {Array} queue\n   */\n\n\n  proto._processLayoutQueue = function (queue) {\n    this.updateStagger();\n    queue.forEach(function (obj, i) {\n      this._positionItem(obj.item, obj.x, obj.y, obj.isInstant, i);\n    }, this);\n  }; // set stagger from option in milliseconds number\n\n\n  proto.updateStagger = function () {\n    var stagger = this.options.stagger;\n\n    if (stagger === null || stagger === undefined) {\n      this.stagger = 0;\n      return;\n    }\n\n    this.stagger = getMilliseconds(stagger);\n    return this.stagger;\n  };\n  /**\n   * Sets position of item in DOM\n   * @param {Outlayer.Item} item\n   * @param {Number} x - horizontal position\n   * @param {Number} y - vertical position\n   * @param {Boolean} isInstant - disables transitions\n   */\n\n\n  proto._positionItem = function (item, x, y, isInstant, i) {\n    if (isInstant) {\n      // if not transition, just set CSS\n      item.goTo(x, y);\n    } else {\n      item.stagger(i * this.stagger);\n      item.moveTo(x, y);\n    }\n  };\n  /**\n   * Any logic you want to do after each layout,\n   * i.e. size the container\n   */\n\n\n  proto._postLayout = function () {\n    this.resizeContainer();\n  };\n\n  proto.resizeContainer = function () {\n    var isResizingContainer = this._getOption('resizeContainer');\n\n    if (!isResizingContainer) {\n      return;\n    }\n\n    var size = this._getContainerSize();\n\n    if (size) {\n      this._setContainerMeasure(size.width, true);\n\n      this._setContainerMeasure(size.height, false);\n    }\n  };\n  /**\n   * Sets width or height of container if returned\n   * @returns {Object} size\n   *   @param {Number} width\n   *   @param {Number} height\n   */\n\n\n  proto._getContainerSize = noop;\n  /**\n   * @param {Number} measure - size of width or height\n   * @param {Boolean} isWidth\n   */\n\n  proto._setContainerMeasure = function (measure, isWidth) {\n    if (measure === undefined) {\n      return;\n    }\n\n    var elemSize = this.size; // add padding and border width if border box\n\n    if (elemSize.isBorderBox) {\n      measure += isWidth ? elemSize.paddingLeft + elemSize.paddingRight + elemSize.borderLeftWidth + elemSize.borderRightWidth : elemSize.paddingBottom + elemSize.paddingTop + elemSize.borderTopWidth + elemSize.borderBottomWidth;\n    }\n\n    measure = Math.max(measure, 0);\n    this.element.style[isWidth ? 'width' : 'height'] = measure + 'px';\n  };\n  /**\n   * emit eventComplete on a collection of items events\n   * @param {String} eventName\n   * @param {Array} items - Outlayer.Items\n   */\n\n\n  proto._emitCompleteOnItems = function (eventName, items) {\n    var _this = this;\n\n    function onComplete() {\n      _this.dispatchEvent(eventName + 'Complete', null, [items]);\n    }\n\n    var count = items.length;\n\n    if (!items || !count) {\n      onComplete();\n      return;\n    }\n\n    var doneCount = 0;\n\n    function tick() {\n      doneCount++;\n\n      if (doneCount == count) {\n        onComplete();\n      }\n    } // bind callback\n\n\n    items.forEach(function (item) {\n      item.once(eventName, tick);\n    });\n  };\n  /**\n   * emits events via EvEmitter and jQuery events\n   * @param {String} type - name of event\n   * @param {Event} event - original event\n   * @param {Array} args - extra arguments\n   */\n\n\n  proto.dispatchEvent = function (type, event, args) {\n    // add original event to arguments\n    var emitArgs = event ? [event].concat(args) : args;\n    this.emitEvent(type, emitArgs);\n\n    if (jQuery) {\n      // set this.$element\n      this.$element = this.$element || jQuery(this.element);\n\n      if (event) {\n        // create jQuery event\n        var $event = jQuery.Event(event);\n        $event.type = type;\n        this.$element.trigger($event, args);\n      } else {\n        // just trigger with type if no event available\n        this.$element.trigger(type, args);\n      }\n    }\n  }; // -------------------------- ignore & stamps -------------------------- //\n\n  /**\n   * keep item in collection, but do not lay it out\n   * ignored items do not get skipped in layout\n   * @param {Element} elem\n   */\n\n\n  proto.ignore = function (elem) {\n    var item = this.getItem(elem);\n\n    if (item) {\n      item.isIgnored = true;\n    }\n  };\n  /**\n   * return item to layout collection\n   * @param {Element} elem\n   */\n\n\n  proto.unignore = function (elem) {\n    var item = this.getItem(elem);\n\n    if (item) {\n      delete item.isIgnored;\n    }\n  };\n  /**\n   * adds elements to stamps\n   * @param {NodeList, Array, Element, or String} elems\n   */\n\n\n  proto.stamp = function (elems) {\n    elems = this._find(elems);\n\n    if (!elems) {\n      return;\n    }\n\n    this.stamps = this.stamps.concat(elems); // ignore\n\n    elems.forEach(this.ignore, this);\n  };\n  /**\n   * removes elements to stamps\n   * @param {NodeList, Array, or Element} elems\n   */\n\n\n  proto.unstamp = function (elems) {\n    elems = this._find(elems);\n\n    if (!elems) {\n      return;\n    }\n\n    elems.forEach(function (elem) {\n      // filter out removed stamp elements\n      utils.removeFrom(this.stamps, elem);\n      this.unignore(elem);\n    }, this);\n  };\n  /**\n   * finds child elements\n   * @param {NodeList, Array, Element, or String} elems\n   * @returns {Array} elems\n   */\n\n\n  proto._find = function (elems) {\n    if (!elems) {\n      return;\n    } // if string, use argument as selector string\n\n\n    if (typeof elems == 'string') {\n      elems = this.element.querySelectorAll(elems);\n    }\n\n    elems = utils.makeArray(elems);\n    return elems;\n  };\n\n  proto._manageStamps = function () {\n    if (!this.stamps || !this.stamps.length) {\n      return;\n    }\n\n    this._getBoundingRect();\n\n    this.stamps.forEach(this._manageStamp, this);\n  }; // update boundingLeft / Top\n\n\n  proto._getBoundingRect = function () {\n    // get bounding rect for container element\n    var boundingRect = this.element.getBoundingClientRect();\n    var size = this.size;\n    this._boundingRect = {\n      left: boundingRect.left + size.paddingLeft + size.borderLeftWidth,\n      top: boundingRect.top + size.paddingTop + size.borderTopWidth,\n      right: boundingRect.right - (size.paddingRight + size.borderRightWidth),\n      bottom: boundingRect.bottom - (size.paddingBottom + size.borderBottomWidth)\n    };\n  };\n  /**\n   * @param {Element} stamp\n  **/\n\n\n  proto._manageStamp = noop;\n  /**\n   * get x/y position of element relative to container element\n   * @param {Element} elem\n   * @returns {Object} offset - has left, top, right, bottom\n   */\n\n  proto._getElementOffset = function (elem) {\n    var boundingRect = elem.getBoundingClientRect();\n    var thisRect = this._boundingRect;\n    var size = getSize(elem);\n    var offset = {\n      left: boundingRect.left - thisRect.left - size.marginLeft,\n      top: boundingRect.top - thisRect.top - size.marginTop,\n      right: thisRect.right - boundingRect.right - size.marginRight,\n      bottom: thisRect.bottom - boundingRect.bottom - size.marginBottom\n    };\n    return offset;\n  }; // -------------------------- resize -------------------------- //\n  // enable event handlers for listeners\n  // i.e. resize -> onresize\n\n\n  proto.handleEvent = utils.handleEvent;\n  /**\n   * Bind layout to window resizing\n   */\n\n  proto.bindResize = function () {\n    window.addEventListener('resize', this);\n    this.isResizeBound = true;\n  };\n  /**\n   * Unbind layout to window resizing\n   */\n\n\n  proto.unbindResize = function () {\n    window.removeEventListener('resize', this);\n    this.isResizeBound = false;\n  };\n\n  proto.onresize = function () {\n    this.resize();\n  };\n\n  utils.debounceMethod(Outlayer, 'onresize', 100);\n\n  proto.resize = function () {\n    // don't trigger if size did not change\n    // or if resize was unbound. See #9\n    if (!this.isResizeBound || !this.needsResizeLayout()) {\n      return;\n    }\n\n    this.layout();\n  };\n  /**\n   * check if layout is needed post layout\n   * @returns Boolean\n   */\n\n\n  proto.needsResizeLayout = function () {\n    var size = getSize(this.element); // check that this.size and size are there\n    // IE8 triggers resize on body size change, so they might not be\n\n    var hasSizes = this.size && size;\n    return hasSizes && size.innerWidth !== this.size.innerWidth;\n  }; // -------------------------- methods -------------------------- //\n\n  /**\n   * add items to Outlayer instance\n   * @param {Array or NodeList or Element} elems\n   * @returns {Array} items - Outlayer.Items\n  **/\n\n\n  proto.addItems = function (elems) {\n    var items = this._itemize(elems); // add items to collection\n\n\n    if (items.length) {\n      this.items = this.items.concat(items);\n    }\n\n    return items;\n  };\n  /**\n   * Layout newly-appended item elements\n   * @param {Array or NodeList or Element} elems\n   */\n\n\n  proto.appended = function (elems) {\n    var items = this.addItems(elems);\n\n    if (!items.length) {\n      return;\n    } // layout and reveal just the new items\n\n\n    this.layoutItems(items, true);\n    this.reveal(items);\n  };\n  /**\n   * Layout prepended elements\n   * @param {Array or NodeList or Element} elems\n   */\n\n\n  proto.prepended = function (elems) {\n    var items = this._itemize(elems);\n\n    if (!items.length) {\n      return;\n    } // add items to beginning of collection\n\n\n    var previousItems = this.items.slice(0);\n    this.items = items.concat(previousItems); // start new layout\n\n    this._resetLayout();\n\n    this._manageStamps(); // layout new stuff without transition\n\n\n    this.layoutItems(items, true);\n    this.reveal(items); // layout previous items\n\n    this.layoutItems(previousItems);\n  };\n  /**\n   * reveal a collection of items\n   * @param {Array of Outlayer.Items} items\n   */\n\n\n  proto.reveal = function (items) {\n    this._emitCompleteOnItems('reveal', items);\n\n    if (!items || !items.length) {\n      return;\n    }\n\n    var stagger = this.updateStagger();\n    items.forEach(function (item, i) {\n      item.stagger(i * stagger);\n      item.reveal();\n    });\n  };\n  /**\n   * hide a collection of items\n   * @param {Array of Outlayer.Items} items\n   */\n\n\n  proto.hide = function (items) {\n    this._emitCompleteOnItems('hide', items);\n\n    if (!items || !items.length) {\n      return;\n    }\n\n    var stagger = this.updateStagger();\n    items.forEach(function (item, i) {\n      item.stagger(i * stagger);\n      item.hide();\n    });\n  };\n  /**\n   * reveal item elements\n   * @param {Array}, {Element}, {NodeList} items\n   */\n\n\n  proto.revealItemElements = function (elems) {\n    var items = this.getItems(elems);\n    this.reveal(items);\n  };\n  /**\n   * hide item elements\n   * @param {Array}, {Element}, {NodeList} items\n   */\n\n\n  proto.hideItemElements = function (elems) {\n    var items = this.getItems(elems);\n    this.hide(items);\n  };\n  /**\n   * get Outlayer.Item, given an Element\n   * @param {Element} elem\n   * @param {Function} callback\n   * @returns {Outlayer.Item} item\n   */\n\n\n  proto.getItem = function (elem) {\n    // loop through items to get the one that matches\n    for (var i = 0; i < this.items.length; i++) {\n      var item = this.items[i];\n\n      if (item.element == elem) {\n        // return item\n        return item;\n      }\n    }\n  };\n  /**\n   * get collection of Outlayer.Items, given Elements\n   * @param {Array} elems\n   * @returns {Array} items - Outlayer.Items\n   */\n\n\n  proto.getItems = function (elems) {\n    elems = utils.makeArray(elems);\n    var items = [];\n    elems.forEach(function (elem) {\n      var item = this.getItem(elem);\n\n      if (item) {\n        items.push(item);\n      }\n    }, this);\n    return items;\n  };\n  /**\n   * remove element(s) from instance and DOM\n   * @param {Array or NodeList or Element} elems\n   */\n\n\n  proto.remove = function (elems) {\n    var removeItems = this.getItems(elems);\n\n    this._emitCompleteOnItems('remove', removeItems); // bail if no items to remove\n\n\n    if (!removeItems || !removeItems.length) {\n      return;\n    }\n\n    removeItems.forEach(function (item) {\n      item.remove(); // remove item from collection\n\n      utils.removeFrom(this.items, item);\n    }, this);\n  }; // ----- destroy ----- //\n  // remove and disable Outlayer instance\n\n\n  proto.destroy = function () {\n    // clean up dynamic styles\n    var style = this.element.style;\n    style.height = '';\n    style.position = '';\n    style.width = ''; // destroy items\n\n    this.items.forEach(function (item) {\n      item.destroy();\n    });\n    this.unbindResize();\n    var id = this.element.outlayerGUID;\n    delete instances[id]; // remove reference to instance by id\n\n    delete this.element.outlayerGUID; // remove data for jQuery\n\n    if (jQuery) {\n      jQuery.removeData(this.element, this.constructor.namespace);\n    }\n  }; // -------------------------- data -------------------------- //\n\n  /**\n   * get Outlayer instance from element\n   * @param {Element} elem\n   * @returns {Outlayer}\n   */\n\n\n  Outlayer.data = function (elem) {\n    elem = utils.getQueryElement(elem);\n    var id = elem && elem.outlayerGUID;\n    return id && instances[id];\n  }; // -------------------------- create Outlayer class -------------------------- //\n\n  /**\n   * create a layout class\n   * @param {String} namespace\n   */\n\n\n  Outlayer.create = function (namespace, options) {\n    // sub-class Outlayer\n    var Layout = subclass(Outlayer); // apply new options and compatOptions\n\n    Layout.defaults = utils.extend({}, Outlayer.defaults);\n    utils.extend(Layout.defaults, options);\n    Layout.compatOptions = utils.extend({}, Outlayer.compatOptions);\n    Layout.namespace = namespace;\n    Layout.data = Outlayer.data; // sub-class Item\n\n    Layout.Item = subclass(Item); // -------------------------- declarative -------------------------- //\n\n    utils.htmlInit(Layout, namespace); // -------------------------- jQuery bridge -------------------------- //\n    // make into jQuery plugin\n\n    if (jQuery && jQuery.bridget) {\n      jQuery.bridget(namespace, Layout);\n    }\n\n    return Layout;\n  };\n\n  function subclass(Parent) {\n    function SubClass() {\n      Parent.apply(this, arguments);\n    }\n\n    SubClass.prototype = Object.create(Parent.prototype);\n    SubClass.prototype.constructor = SubClass;\n    return SubClass;\n  } // ----- helpers ----- //\n  // how many milliseconds are in each unit\n\n\n  var msUnits = {\n    ms: 1,\n    s: 1000\n  }; // munge time-like parameter into millisecond number\n  // '0.4s' -> 40\n\n  function getMilliseconds(time) {\n    if (typeof time == 'number') {\n      return time;\n    }\n\n    var matches = time.match(/(^\\d*\\.?\\d*)(\\w*)/);\n    var num = matches && matches[1];\n    var unit = matches && matches[2];\n\n    if (!num.length) {\n      return 0;\n    }\n\n    num = parseFloat(num);\n    var mult = msUnits[unit] || 1;\n    return num * mult;\n  } // ----- fin ----- //\n  // back in global\n\n\n  Outlayer.Item = Item;\n  return Outlayer;\n});\n/**\n * Isotope Item\n**/\n\n\n(function (window, factory) {\n  // universal module definition\n\n  /* jshint strict: false */\n\n  /*globals define, module, require */\n  if (typeof define == 'function' && define.amd) {\n    // AMD\n    define('isotope-layout/js/item', ['outlayer/outlayer'], factory);\n  } else if (typeof module == 'object' && module.exports) {\n    // CommonJS\n    module.exports = factory(require('outlayer'));\n  } else {\n    // browser global\n    window.Isotope = window.Isotope || {};\n    window.Isotope.Item = factory(window.Outlayer);\n  }\n})(window, function factory(Outlayer) {\n  'use strict'; // -------------------------- Item -------------------------- //\n  // sub-class Outlayer Item\n\n  function Item() {\n    Outlayer.Item.apply(this, arguments);\n  }\n\n  var proto = Item.prototype = Object.create(Outlayer.Item.prototype);\n  var _create = proto._create;\n\n  proto._create = function () {\n    // assign id, used for original-order sorting\n    this.id = this.layout.itemGUID++;\n\n    _create.call(this);\n\n    this.sortData = {};\n  };\n\n  proto.updateSortData = function () {\n    if (this.isIgnored) {\n      return;\n    } // default sorters\n\n\n    this.sortData.id = this.id; // for backward compatibility\n\n    this.sortData['original-order'] = this.id;\n    this.sortData.random = Math.random(); // go thru getSortData obj and apply the sorters\n\n    var getSortData = this.layout.options.getSortData;\n    var sorters = this.layout._sorters;\n\n    for (var key in getSortData) {\n      var sorter = sorters[key];\n      this.sortData[key] = sorter(this.element, this);\n    }\n  };\n\n  var _destroy = proto.destroy;\n\n  proto.destroy = function () {\n    // call super\n    _destroy.apply(this, arguments); // reset display, #741\n\n\n    this.css({\n      display: ''\n    });\n  };\n\n  return Item;\n});\n/**\n * Isotope LayoutMode\n */\n\n\n(function (window, factory) {\n  // universal module definition\n\n  /* jshint strict: false */\n\n  /*globals define, module, require */\n  if (typeof define == 'function' && define.amd) {\n    // AMD\n    define('isotope-layout/js/layout-mode', ['get-size/get-size', 'outlayer/outlayer'], factory);\n  } else if (typeof module == 'object' && module.exports) {\n    // CommonJS\n    module.exports = factory(require('get-size'), require('outlayer'));\n  } else {\n    // browser global\n    window.Isotope = window.Isotope || {};\n    window.Isotope.LayoutMode = factory(window.getSize, window.Outlayer);\n  }\n})(window, function factory(getSize, Outlayer) {\n  'use strict'; // layout mode class\n\n  function LayoutMode(isotope) {\n    this.isotope = isotope; // link properties\n\n    if (isotope) {\n      this.options = isotope.options[this.namespace];\n      this.element = isotope.element;\n      this.items = isotope.filteredItems;\n      this.size = isotope.size;\n    }\n  }\n\n  var proto = LayoutMode.prototype;\n  /**\n   * some methods should just defer to default Outlayer method\n   * and reference the Isotope instance as `this`\n  **/\n\n  var facadeMethods = ['_resetLayout', '_getItemLayoutPosition', '_manageStamp', '_getContainerSize', '_getElementOffset', 'needsResizeLayout', '_getOption'];\n  facadeMethods.forEach(function (methodName) {\n    proto[methodName] = function () {\n      return Outlayer.prototype[methodName].apply(this.isotope, arguments);\n    };\n  }); // -----  ----- //\n  // for horizontal layout modes, check vertical size\n\n  proto.needsVerticalResizeLayout = function () {\n    // don't trigger if size did not change\n    var size = getSize(this.isotope.element); // check that this.size and size are there\n    // IE8 triggers resize on body size change, so they might not be\n\n    var hasSizes = this.isotope.size && size;\n    return hasSizes && size.innerHeight != this.isotope.size.innerHeight;\n  }; // ----- measurements ----- //\n\n\n  proto._getMeasurement = function () {\n    this.isotope._getMeasurement.apply(this, arguments);\n  };\n\n  proto.getColumnWidth = function () {\n    this.getSegmentSize('column', 'Width');\n  };\n\n  proto.getRowHeight = function () {\n    this.getSegmentSize('row', 'Height');\n  };\n  /**\n   * get columnWidth or rowHeight\n   * segment: 'column' or 'row'\n   * size 'Width' or 'Height'\n  **/\n\n\n  proto.getSegmentSize = function (segment, size) {\n    var segmentName = segment + size;\n    var outerSize = 'outer' + size; // columnWidth / outerWidth // rowHeight / outerHeight\n\n    this._getMeasurement(segmentName, outerSize); // got rowHeight or columnWidth, we can chill\n\n\n    if (this[segmentName]) {\n      return;\n    } // fall back to item of first element\n\n\n    var firstItemSize = this.getFirstItemSize();\n    this[segmentName] = firstItemSize && firstItemSize[outerSize] || // or size of container\n    this.isotope.size['inner' + size];\n  };\n\n  proto.getFirstItemSize = function () {\n    var firstItem = this.isotope.filteredItems[0];\n    return firstItem && firstItem.element && getSize(firstItem.element);\n  }; // ----- methods that should reference isotope ----- //\n\n\n  proto.layout = function () {\n    this.isotope.layout.apply(this.isotope, arguments);\n  };\n\n  proto.getSize = function () {\n    this.isotope.getSize();\n    this.size = this.isotope.size;\n  }; // -------------------------- create -------------------------- //\n\n\n  LayoutMode.modes = {};\n\n  LayoutMode.create = function (namespace, options) {\n    function Mode() {\n      LayoutMode.apply(this, arguments);\n    }\n\n    Mode.prototype = Object.create(proto);\n    Mode.prototype.constructor = Mode; // default options\n\n    if (options) {\n      Mode.options = options;\n    }\n\n    Mode.prototype.namespace = namespace; // register in Isotope\n\n    LayoutMode.modes[namespace] = Mode;\n    return Mode;\n  };\n\n  return LayoutMode;\n});\n/*!\n * Masonry v4.2.1\n * Cascading grid layout library\n * https://masonry.desandro.com\n * MIT License\n * by David DeSandro\n */\n\n\n(function (window, factory) {\n  // universal module definition\n\n  /* jshint strict: false */\n\n  /*globals define, module, require */\n  if (typeof define == 'function' && define.amd) {\n    // AMD\n    define('masonry-layout/masonry', ['outlayer/outlayer', 'get-size/get-size'], factory);\n  } else if (typeof module == 'object' && module.exports) {\n    // CommonJS\n    module.exports = factory(require('outlayer'), require('get-size'));\n  } else {\n    // browser global\n    window.Masonry = factory(window.Outlayer, window.getSize);\n  }\n})(window, function factory(Outlayer, getSize) {\n  // -------------------------- masonryDefinition -------------------------- //\n  // create an Outlayer layout class\n  var Masonry = Outlayer.create('masonry'); // isFitWidth -> fitWidth\n\n  Masonry.compatOptions.fitWidth = 'isFitWidth';\n  var proto = Masonry.prototype;\n\n  proto._resetLayout = function () {\n    this.getSize();\n\n    this._getMeasurement('columnWidth', 'outerWidth');\n\n    this._getMeasurement('gutter', 'outerWidth');\n\n    this.measureColumns(); // reset column Y\n\n    this.colYs = [];\n\n    for (var i = 0; i < this.cols; i++) {\n      this.colYs.push(0);\n    }\n\n    this.maxY = 0;\n    this.horizontalColIndex = 0;\n  };\n\n  proto.measureColumns = function () {\n    this.getContainerWidth(); // if columnWidth is 0, default to outerWidth of first item\n\n    if (!this.columnWidth) {\n      var firstItem = this.items[0];\n      var firstItemElem = firstItem && firstItem.element; // columnWidth fall back to item of first element\n\n      this.columnWidth = firstItemElem && getSize(firstItemElem).outerWidth || // if first elem has no width, default to size of container\n      this.containerWidth;\n    }\n\n    var columnWidth = this.columnWidth += this.gutter; // calculate columns\n\n    var containerWidth = this.containerWidth + this.gutter;\n    var cols = containerWidth / columnWidth; // fix rounding errors, typically with gutters\n\n    var excess = columnWidth - containerWidth % columnWidth; // if overshoot is less than a pixel, round up, otherwise floor it\n\n    var mathMethod = excess && excess < 1 ? 'round' : 'floor';\n    cols = Math[mathMethod](cols);\n    this.cols = Math.max(cols, 1);\n  };\n\n  proto.getContainerWidth = function () {\n    // container is parent if fit width\n    var isFitWidth = this._getOption('fitWidth');\n\n    var container = isFitWidth ? this.element.parentNode : this.element; // check that this.size and size are there\n    // IE8 triggers resize on body size change, so they might not be\n\n    var size = getSize(container);\n    this.containerWidth = size && size.innerWidth;\n  };\n\n  proto._getItemLayoutPosition = function (item) {\n    item.getSize(); // how many columns does this brick span\n\n    var remainder = item.size.outerWidth % this.columnWidth;\n    var mathMethod = remainder && remainder < 1 ? 'round' : 'ceil'; // round if off by 1 pixel, otherwise use ceil\n\n    var colSpan = Math[mathMethod](item.size.outerWidth / this.columnWidth);\n    colSpan = Math.min(colSpan, this.cols); // use horizontal or top column position\n\n    var colPosMethod = this.options.horizontalOrder ? '_getHorizontalColPosition' : '_getTopColPosition';\n    var colPosition = this[colPosMethod](colSpan, item); // position the brick\n\n    var position = {\n      x: this.columnWidth * colPosition.col,\n      y: colPosition.y\n    }; // apply setHeight to necessary columns\n\n    var setHeight = colPosition.y + item.size.outerHeight;\n    var setMax = colSpan + colPosition.col;\n\n    for (var i = colPosition.col; i < setMax; i++) {\n      this.colYs[i] = setHeight;\n    }\n\n    return position;\n  };\n\n  proto._getTopColPosition = function (colSpan) {\n    var colGroup = this._getTopColGroup(colSpan); // get the minimum Y value from the columns\n\n\n    var minimumY = Math.min.apply(Math, colGroup);\n    return {\n      col: colGroup.indexOf(minimumY),\n      y: minimumY\n    };\n  };\n  /**\n   * @param {Number} colSpan - number of columns the element spans\n   * @returns {Array} colGroup\n   */\n\n\n  proto._getTopColGroup = function (colSpan) {\n    if (colSpan < 2) {\n      // if brick spans only one column, use all the column Ys\n      return this.colYs;\n    }\n\n    var colGroup = []; // how many different places could this brick fit horizontally\n\n    var groupCount = this.cols + 1 - colSpan; // for each group potential horizontal position\n\n    for (var i = 0; i < groupCount; i++) {\n      colGroup[i] = this._getColGroupY(i, colSpan);\n    }\n\n    return colGroup;\n  };\n\n  proto._getColGroupY = function (col, colSpan) {\n    if (colSpan < 2) {\n      return this.colYs[col];\n    } // make an array of colY values for that one group\n\n\n    var groupColYs = this.colYs.slice(col, col + colSpan); // and get the max value of the array\n\n    return Math.max.apply(Math, groupColYs);\n  }; // get column position based on horizontal index. #873\n\n\n  proto._getHorizontalColPosition = function (colSpan, item) {\n    var col = this.horizontalColIndex % this.cols;\n    var isOver = colSpan > 1 && col + colSpan > this.cols; // shift to next row if item can't fit on current row\n\n    col = isOver ? 0 : col; // don't let zero-size items take up space\n\n    var hasSize = item.size.outerWidth && item.size.outerHeight;\n    this.horizontalColIndex = hasSize ? col + colSpan : this.horizontalColIndex;\n    return {\n      col: col,\n      y: this._getColGroupY(col, colSpan)\n    };\n  };\n\n  proto._manageStamp = function (stamp) {\n    var stampSize = getSize(stamp);\n\n    var offset = this._getElementOffset(stamp); // get the columns that this stamp affects\n\n\n    var isOriginLeft = this._getOption('originLeft');\n\n    var firstX = isOriginLeft ? offset.left : offset.right;\n    var lastX = firstX + stampSize.outerWidth;\n    var firstCol = Math.floor(firstX / this.columnWidth);\n    firstCol = Math.max(0, firstCol);\n    var lastCol = Math.floor(lastX / this.columnWidth); // lastCol should not go over if multiple of columnWidth #425\n\n    lastCol -= lastX % this.columnWidth ? 0 : 1;\n    lastCol = Math.min(this.cols - 1, lastCol); // set colYs to bottom of the stamp\n\n    var isOriginTop = this._getOption('originTop');\n\n    var stampMaxY = (isOriginTop ? offset.top : offset.bottom) + stampSize.outerHeight;\n\n    for (var i = firstCol; i <= lastCol; i++) {\n      this.colYs[i] = Math.max(stampMaxY, this.colYs[i]);\n    }\n  };\n\n  proto._getContainerSize = function () {\n    this.maxY = Math.max.apply(Math, this.colYs);\n    var size = {\n      height: this.maxY\n    };\n\n    if (this._getOption('fitWidth')) {\n      size.width = this._getContainerFitWidth();\n    }\n\n    return size;\n  };\n\n  proto._getContainerFitWidth = function () {\n    var unusedCols = 0; // count unused columns\n\n    var i = this.cols;\n\n    while (--i) {\n      if (this.colYs[i] !== 0) {\n        break;\n      }\n\n      unusedCols++;\n    } // fit container to columns that have been used\n\n\n    return (this.cols - unusedCols) * this.columnWidth - this.gutter;\n  };\n\n  proto.needsResizeLayout = function () {\n    var previousWidth = this.containerWidth;\n    this.getContainerWidth();\n    return previousWidth != this.containerWidth;\n  };\n\n  return Masonry;\n});\n/*!\n * Masonry layout mode\n * sub-classes Masonry\n * https://masonry.desandro.com\n */\n\n\n(function (window, factory) {\n  // universal module definition\n\n  /* jshint strict: false */\n\n  /*globals define, module, require */\n  if (typeof define == 'function' && define.amd) {\n    // AMD\n    define('isotope-layout/js/layout-modes/masonry', ['../layout-mode', 'masonry-layout/masonry'], factory);\n  } else if (typeof module == 'object' && module.exports) {\n    // CommonJS\n    module.exports = factory(require('../layout-mode'), require('masonry-layout'));\n  } else {\n    // browser global\n    factory(window.Isotope.LayoutMode, window.Masonry);\n  }\n})(window, function factory(LayoutMode, Masonry) {\n  'use strict'; // -------------------------- masonryDefinition -------------------------- //\n  // create an Outlayer layout class\n\n  var MasonryMode = LayoutMode.create('masonry');\n  var proto = MasonryMode.prototype;\n  var keepModeMethods = {\n    _getElementOffset: true,\n    layout: true,\n    _getMeasurement: true\n  }; // inherit Masonry prototype\n\n  for (var method in Masonry.prototype) {\n    // do not inherit mode methods\n    if (!keepModeMethods[method]) {\n      proto[method] = Masonry.prototype[method];\n    }\n  }\n\n  var measureColumns = proto.measureColumns;\n\n  proto.measureColumns = function () {\n    // set items, used if measuring first item\n    this.items = this.isotope.filteredItems;\n    measureColumns.call(this);\n  }; // point to mode options for fitWidth\n\n\n  var _getOption = proto._getOption;\n\n  proto._getOption = function (option) {\n    if (option == 'fitWidth') {\n      return this.options.isFitWidth !== undefined ? this.options.isFitWidth : this.options.fitWidth;\n    }\n\n    return _getOption.apply(this.isotope, arguments);\n  };\n\n  return MasonryMode;\n});\n/**\n * fitRows layout mode\n */\n\n\n(function (window, factory) {\n  // universal module definition\n\n  /* jshint strict: false */\n\n  /*globals define, module, require */\n  if (typeof define == 'function' && define.amd) {\n    // AMD\n    define('isotope-layout/js/layout-modes/fit-rows', ['../layout-mode'], factory);\n  } else if (typeof exports == 'object') {\n    // CommonJS\n    module.exports = factory(require('../layout-mode'));\n  } else {\n    // browser global\n    factory(window.Isotope.LayoutMode);\n  }\n})(window, function factory(LayoutMode) {\n  'use strict';\n\n  var FitRows = LayoutMode.create('fitRows');\n  var proto = FitRows.prototype;\n\n  proto._resetLayout = function () {\n    this.x = 0;\n    this.y = 0;\n    this.maxY = 0;\n\n    this._getMeasurement('gutter', 'outerWidth');\n  };\n\n  proto._getItemLayoutPosition = function (item) {\n    item.getSize();\n    var itemWidth = item.size.outerWidth + this.gutter; // if this element cannot fit in the current row\n\n    var containerWidth = this.isotope.size.innerWidth + this.gutter;\n\n    if (this.x !== 0 && itemWidth + this.x > containerWidth) {\n      this.x = 0;\n      this.y = this.maxY;\n    }\n\n    var position = {\n      x: this.x,\n      y: this.y\n    };\n    this.maxY = Math.max(this.maxY, this.y + item.size.outerHeight);\n    this.x += itemWidth;\n    return position;\n  };\n\n  proto._getContainerSize = function () {\n    return {\n      height: this.maxY\n    };\n  };\n\n  return FitRows;\n});\n/**\n * vertical layout mode\n */\n\n\n(function (window, factory) {\n  // universal module definition\n\n  /* jshint strict: false */\n\n  /*globals define, module, require */\n  if (typeof define == 'function' && define.amd) {\n    // AMD\n    define('isotope-layout/js/layout-modes/vertical', ['../layout-mode'], factory);\n  } else if (typeof module == 'object' && module.exports) {\n    // CommonJS\n    module.exports = factory(require('../layout-mode'));\n  } else {\n    // browser global\n    factory(window.Isotope.LayoutMode);\n  }\n})(window, function factory(LayoutMode) {\n  'use strict';\n\n  var Vertical = LayoutMode.create('vertical', {\n    horizontalAlignment: 0\n  });\n  var proto = Vertical.prototype;\n\n  proto._resetLayout = function () {\n    this.y = 0;\n  };\n\n  proto._getItemLayoutPosition = function (item) {\n    item.getSize();\n    var x = (this.isotope.size.innerWidth - item.size.outerWidth) * this.options.horizontalAlignment;\n    var y = this.y;\n    this.y += item.size.outerHeight;\n    return {\n      x: x,\n      y: y\n    };\n  };\n\n  proto._getContainerSize = function () {\n    return {\n      height: this.y\n    };\n  };\n\n  return Vertical;\n});\n/*!\n * Isotope v3.0.6\n *\n * Licensed GPLv3 for open source use\n * or Isotope Commercial License for commercial use\n *\n * https://isotope.metafizzy.co\n * Copyright 2010-2018 Metafizzy\n */\n\n\n(function (window, factory) {\n  // universal module definition\n\n  /* jshint strict: false */\n\n  /*globals define, module, require */\n  if (typeof define == 'function' && define.amd) {\n    // AMD\n    define(['outlayer/outlayer', 'get-size/get-size', 'desandro-matches-selector/matches-selector', 'fizzy-ui-utils/utils', 'isotope-layout/js/item', 'isotope-layout/js/layout-mode', // include default layout modes\n    'isotope-layout/js/layout-modes/masonry', 'isotope-layout/js/layout-modes/fit-rows', 'isotope-layout/js/layout-modes/vertical'], function (Outlayer, getSize, matchesSelector, utils, Item, LayoutMode) {\n      return factory(window, Outlayer, getSize, matchesSelector, utils, Item, LayoutMode);\n    });\n  } else if (typeof module == 'object' && module.exports) {\n    // CommonJS\n    module.exports = factory(window, require('outlayer'), require('get-size'), require('desandro-matches-selector'), require('fizzy-ui-utils'), require('isotope-layout/js/item'), require('isotope-layout/js/layout-mode'), // include default layout modes\n    require('isotope-layout/js/layout-modes/masonry'), require('isotope-layout/js/layout-modes/fit-rows'), require('isotope-layout/js/layout-modes/vertical'));\n  } else {\n    // browser global\n    window.Isotope = factory(window, window.Outlayer, window.getSize, window.matchesSelector, window.fizzyUIUtils, window.Isotope.Item, window.Isotope.LayoutMode);\n  }\n})(window, function factory(window, Outlayer, getSize, matchesSelector, utils, Item, LayoutMode) {\n  // -------------------------- vars -------------------------- //\n  var jQuery = window.jQuery; // -------------------------- helpers -------------------------- //\n\n  var trim = String.prototype.trim ? function (str) {\n    return str.trim();\n  } : function (str) {\n    return str.replace(/^\\s+|\\s+$/g, '');\n  }; // -------------------------- isotopeDefinition -------------------------- //\n  // create an Outlayer layout class\n\n  var Isotope = Outlayer.create('isotope', {\n    layoutMode: 'masonry',\n    isJQueryFiltering: true,\n    sortAscending: true\n  });\n  Isotope.Item = Item;\n  Isotope.LayoutMode = LayoutMode;\n  var proto = Isotope.prototype;\n\n  proto._create = function () {\n    this.itemGUID = 0; // functions that sort items\n\n    this._sorters = {};\n\n    this._getSorters(); // call super\n\n\n    Outlayer.prototype._create.call(this); // create layout modes\n\n\n    this.modes = {}; // start filteredItems with all items\n\n    this.filteredItems = this.items; // keep of track of sortBys\n\n    this.sortHistory = ['original-order']; // create from registered layout modes\n\n    for (var name in LayoutMode.modes) {\n      this._initLayoutMode(name);\n    }\n  };\n\n  proto.reloadItems = function () {\n    // reset item ID counter\n    this.itemGUID = 0; // call super\n\n    Outlayer.prototype.reloadItems.call(this);\n  };\n\n  proto._itemize = function () {\n    var items = Outlayer.prototype._itemize.apply(this, arguments); // assign ID for original-order\n\n\n    for (var i = 0; i < items.length; i++) {\n      var item = items[i];\n      item.id = this.itemGUID++;\n    }\n\n    this._updateItemsSortData(items);\n\n    return items;\n  }; // -------------------------- layout -------------------------- //\n\n\n  proto._initLayoutMode = function (name) {\n    var Mode = LayoutMode.modes[name]; // set mode options\n    // HACK extend initial options, back-fill in default options\n\n    var initialOpts = this.options[name] || {};\n    this.options[name] = Mode.options ? utils.extend(Mode.options, initialOpts) : initialOpts; // init layout mode instance\n\n    this.modes[name] = new Mode(this);\n  };\n\n  proto.layout = function () {\n    // if first time doing layout, do all magic\n    if (!this._isLayoutInited && this._getOption('initLayout')) {\n      this.arrange();\n      return;\n    }\n\n    this._layout();\n  }; // private method to be used in layout() & magic()\n\n\n  proto._layout = function () {\n    // don't animate first layout\n    var isInstant = this._getIsInstant(); // layout flow\n\n\n    this._resetLayout();\n\n    this._manageStamps();\n\n    this.layoutItems(this.filteredItems, isInstant); // flag for initalized\n\n    this._isLayoutInited = true;\n  }; // filter + sort + layout\n\n\n  proto.arrange = function (opts) {\n    // set any options pass\n    this.option(opts);\n\n    this._getIsInstant(); // filter, sort, and layout\n    // filter\n\n\n    var filtered = this._filter(this.items);\n\n    this.filteredItems = filtered.matches;\n\n    this._bindArrangeComplete();\n\n    if (this._isInstant) {\n      this._noTransition(this._hideReveal, [filtered]);\n    } else {\n      this._hideReveal(filtered);\n    }\n\n    this._sort();\n\n    this._layout();\n  }; // alias to _init for main plugin method\n\n\n  proto._init = proto.arrange;\n\n  proto._hideReveal = function (filtered) {\n    this.reveal(filtered.needReveal);\n    this.hide(filtered.needHide);\n  }; // HACK\n  // Don't animate/transition first layout\n  // Or don't animate/transition other layouts\n\n\n  proto._getIsInstant = function () {\n    var isLayoutInstant = this._getOption('layoutInstant');\n\n    var isInstant = isLayoutInstant !== undefined ? isLayoutInstant : !this._isLayoutInited;\n    this._isInstant = isInstant;\n    return isInstant;\n  }; // listen for layoutComplete, hideComplete and revealComplete\n  // to trigger arrangeComplete\n\n\n  proto._bindArrangeComplete = function () {\n    // listen for 3 events to trigger arrangeComplete\n    var isLayoutComplete, isHideComplete, isRevealComplete;\n\n    var _this = this;\n\n    function arrangeParallelCallback() {\n      if (isLayoutComplete && isHideComplete && isRevealComplete) {\n        _this.dispatchEvent('arrangeComplete', null, [_this.filteredItems]);\n      }\n    }\n\n    this.once('layoutComplete', function () {\n      isLayoutComplete = true;\n      arrangeParallelCallback();\n    });\n    this.once('hideComplete', function () {\n      isHideComplete = true;\n      arrangeParallelCallback();\n    });\n    this.once('revealComplete', function () {\n      isRevealComplete = true;\n      arrangeParallelCallback();\n    });\n  }; // -------------------------- filter -------------------------- //\n\n\n  proto._filter = function (items) {\n    var filter = this.options.filter;\n    filter = filter || '*';\n    var matches = [];\n    var hiddenMatched = [];\n    var visibleUnmatched = [];\n\n    var test = this._getFilterTest(filter); // test each item\n\n\n    for (var i = 0; i < items.length; i++) {\n      var item = items[i];\n\n      if (item.isIgnored) {\n        continue;\n      } // add item to either matched or unmatched group\n\n\n      var isMatched = test(item); // item.isFilterMatched = isMatched;\n      // add to matches if its a match\n\n      if (isMatched) {\n        matches.push(item);\n      } // add to additional group if item needs to be hidden or revealed\n\n\n      if (isMatched && item.isHidden) {\n        hiddenMatched.push(item);\n      } else if (!isMatched && !item.isHidden) {\n        visibleUnmatched.push(item);\n      }\n    } // return collections of items to be manipulated\n\n\n    return {\n      matches: matches,\n      needReveal: hiddenMatched,\n      needHide: visibleUnmatched\n    };\n  }; // get a jQuery, function, or a matchesSelector test given the filter\n\n\n  proto._getFilterTest = function (filter) {\n    if (jQuery && this.options.isJQueryFiltering) {\n      // use jQuery\n      return function (item) {\n        return jQuery(item.element).is(filter);\n      };\n    }\n\n    if (typeof filter == 'function') {\n      // use filter as function\n      return function (item) {\n        return filter(item.element);\n      };\n    } // default, use filter as selector string\n\n\n    return function (item) {\n      return matchesSelector(item.element, filter);\n    };\n  }; // -------------------------- sorting -------------------------- //\n\n  /**\n   * @params {Array} elems\n   * @public\n   */\n\n\n  proto.updateSortData = function (elems) {\n    // get items\n    var items;\n\n    if (elems) {\n      elems = utils.makeArray(elems);\n      items = this.getItems(elems);\n    } else {\n      // update all items if no elems provided\n      items = this.items;\n    }\n\n    this._getSorters();\n\n    this._updateItemsSortData(items);\n  };\n\n  proto._getSorters = function () {\n    var getSortData = this.options.getSortData;\n\n    for (var key in getSortData) {\n      var sorter = getSortData[key];\n      this._sorters[key] = mungeSorter(sorter);\n    }\n  };\n  /**\n   * @params {Array} items - of Isotope.Items\n   * @private\n   */\n\n\n  proto._updateItemsSortData = function (items) {\n    // do not update if no items\n    var len = items && items.length;\n\n    for (var i = 0; len && i < len; i++) {\n      var item = items[i];\n      item.updateSortData();\n    }\n  }; // ----- munge sorter ----- //\n  // encapsulate this, as we just need mungeSorter\n  // other functions in here are just for munging\n\n\n  var mungeSorter = function () {\n    // add a magic layer to sorters for convienent shorthands\n    // `.foo-bar` will use the text of .foo-bar querySelector\n    // `[foo-bar]` will use attribute\n    // you can also add parser\n    // `.foo-bar parseInt` will parse that as a number\n    function mungeSorter(sorter) {\n      // if not a string, return function or whatever it is\n      if (typeof sorter != 'string') {\n        return sorter;\n      } // parse the sorter string\n\n\n      var args = trim(sorter).split(' ');\n      var query = args[0]; // check if query looks like [an-attribute]\n\n      var attrMatch = query.match(/^\\[(.+)\\]$/);\n      var attr = attrMatch && attrMatch[1];\n      var getValue = getValueGetter(attr, query); // use second argument as a parser\n\n      var parser = Isotope.sortDataParsers[args[1]]; // parse the value, if there was a parser\n\n      sorter = parser ? function (elem) {\n        return elem && parser(getValue(elem));\n      } : // otherwise just return value\n      function (elem) {\n        return elem && getValue(elem);\n      };\n      return sorter;\n    } // get an attribute getter, or get text of the querySelector\n\n\n    function getValueGetter(attr, query) {\n      // if query looks like [foo-bar], get attribute\n      if (attr) {\n        return function getAttribute(elem) {\n          return elem.getAttribute(attr);\n        };\n      } // otherwise, assume its a querySelector, and get its text\n\n\n      return function getChildText(elem) {\n        var child = elem.querySelector(query);\n        return child && child.textContent;\n      };\n    }\n\n    return mungeSorter;\n  }(); // parsers used in getSortData shortcut strings\n\n\n  Isotope.sortDataParsers = {\n    'parseInt': function (_parseInt) {\n      function parseInt(_x) {\n        return _parseInt.apply(this, arguments);\n      }\n\n      parseInt.toString = function () {\n        return _parseInt.toString();\n      };\n\n      return parseInt;\n    }(function (val) {\n      return parseInt(val, 10);\n    }),\n    'parseFloat': function (_parseFloat) {\n      function parseFloat(_x2) {\n        return _parseFloat.apply(this, arguments);\n      }\n\n      parseFloat.toString = function () {\n        return _parseFloat.toString();\n      };\n\n      return parseFloat;\n    }(function (val) {\n      return parseFloat(val);\n    })\n  }; // ----- sort method ----- //\n  // sort filteredItem order\n\n  proto._sort = function () {\n    if (!this.options.sortBy) {\n      return;\n    } // keep track of sortBy History\n\n\n    var sortBys = utils.makeArray(this.options.sortBy);\n\n    if (!this._getIsSameSortBy(sortBys)) {\n      // concat all sortBy and sortHistory, add to front, oldest goes in last\n      this.sortHistory = sortBys.concat(this.sortHistory);\n    } // sort magic\n\n\n    var itemSorter = getItemSorter(this.sortHistory, this.options.sortAscending);\n    this.filteredItems.sort(itemSorter);\n  }; // check if sortBys is same as start of sortHistory\n\n\n  proto._getIsSameSortBy = function (sortBys) {\n    for (var i = 0; i < sortBys.length; i++) {\n      if (sortBys[i] != this.sortHistory[i]) {\n        return false;\n      }\n    }\n\n    return true;\n  }; // returns a function used for sorting\n\n\n  function getItemSorter(sortBys, sortAsc) {\n    return function sorter(itemA, itemB) {\n      // cycle through all sortKeys\n      for (var i = 0; i < sortBys.length; i++) {\n        var sortBy = sortBys[i];\n        var a = itemA.sortData[sortBy];\n        var b = itemB.sortData[sortBy];\n\n        if (a > b || a < b) {\n          // if sortAsc is an object, use the value given the sortBy key\n          var isAscending = sortAsc[sortBy] !== undefined ? sortAsc[sortBy] : sortAsc;\n          var direction = isAscending ? 1 : -1;\n          return (a > b ? 1 : -1) * direction;\n        }\n      }\n\n      return 0;\n    };\n  } // -------------------------- methods -------------------------- //\n  // get layout mode\n\n\n  proto._mode = function () {\n    var layoutMode = this.options.layoutMode;\n    var mode = this.modes[layoutMode];\n\n    if (!mode) {\n      // TODO console.error\n      throw new Error('No layout mode: ' + layoutMode);\n    } // HACK sync mode's options\n    // any options set after init for layout mode need to be synced\n\n\n    mode.options = this.options[layoutMode];\n    return mode;\n  };\n\n  proto._resetLayout = function () {\n    // trigger original reset layout\n    Outlayer.prototype._resetLayout.call(this);\n\n    this._mode()._resetLayout();\n  };\n\n  proto._getItemLayoutPosition = function (item) {\n    return this._mode()._getItemLayoutPosition(item);\n  };\n\n  proto._manageStamp = function (stamp) {\n    this._mode()._manageStamp(stamp);\n  };\n\n  proto._getContainerSize = function () {\n    return this._mode()._getContainerSize();\n  };\n\n  proto.needsResizeLayout = function () {\n    return this._mode().needsResizeLayout();\n  }; // -------------------------- adding & removing -------------------------- //\n  // HEADS UP overwrites default Outlayer appended\n\n\n  proto.appended = function (elems) {\n    var items = this.addItems(elems);\n\n    if (!items.length) {\n      return;\n    } // filter, layout, reveal new items\n\n\n    var filteredItems = this._filterRevealAdded(items); // add to filteredItems\n\n\n    this.filteredItems = this.filteredItems.concat(filteredItems);\n  }; // HEADS UP overwrites default Outlayer prepended\n\n\n  proto.prepended = function (elems) {\n    var items = this._itemize(elems);\n\n    if (!items.length) {\n      return;\n    } // start new layout\n\n\n    this._resetLayout();\n\n    this._manageStamps(); // filter, layout, reveal new items\n\n\n    var filteredItems = this._filterRevealAdded(items); // layout previous items\n\n\n    this.layoutItems(this.filteredItems); // add to items and filteredItems\n\n    this.filteredItems = filteredItems.concat(this.filteredItems);\n    this.items = items.concat(this.items);\n  };\n\n  proto._filterRevealAdded = function (items) {\n    var filtered = this._filter(items);\n\n    this.hide(filtered.needHide); // reveal all new items\n\n    this.reveal(filtered.matches); // layout new items, no transition\n\n    this.layoutItems(filtered.matches, true);\n    return filtered.matches;\n  };\n  /**\n   * Filter, sort, and layout newly-appended item elements\n   * @param {Array or NodeList or Element} elems\n   */\n\n\n  proto.insert = function (elems) {\n    var items = this.addItems(elems);\n\n    if (!items.length) {\n      return;\n    } // append item elements\n\n\n    var i, item;\n    var len = items.length;\n\n    for (i = 0; i < len; i++) {\n      item = items[i];\n      this.element.appendChild(item.element);\n    } // filter new stuff\n\n\n    var filteredInsertItems = this._filter(items).matches; // set flag\n\n\n    for (i = 0; i < len; i++) {\n      items[i].isLayoutInstant = true;\n    }\n\n    this.arrange(); // reset flag\n\n    for (i = 0; i < len; i++) {\n      delete items[i].isLayoutInstant;\n    }\n\n    this.reveal(filteredInsertItems);\n  };\n\n  var _remove = proto.remove;\n\n  proto.remove = function (elems) {\n    elems = utils.makeArray(elems);\n    var removeItems = this.getItems(elems); // do regular thing\n\n    _remove.call(this, elems); // bail if no items to remove\n\n\n    var len = removeItems && removeItems.length; // remove elems from filteredItems\n\n    for (var i = 0; len && i < len; i++) {\n      var item = removeItems[i]; // remove item from collection\n\n      utils.removeFrom(this.filteredItems, item);\n    }\n  };\n\n  proto.shuffle = function () {\n    // update random sortData\n    for (var i = 0; i < this.items.length; i++) {\n      var item = this.items[i];\n      item.sortData.random = Math.random();\n    }\n\n    this.options.sortBy = 'random';\n\n    this._sort();\n\n    this._layout();\n  };\n  /**\n   * trigger fn without transition\n   * kind of hacky to have this in the first place\n   * @param {Function} fn\n   * @param {Array} args\n   * @returns ret\n   * @private\n   */\n\n\n  proto._noTransition = function (fn, args) {\n    // save transitionDuration before disabling\n    var transitionDuration = this.options.transitionDuration; // disable transition\n\n    this.options.transitionDuration = 0; // do it\n\n    var returnValue = fn.apply(this, args); // re-enable transition for reveal\n\n    this.options.transitionDuration = transitionDuration;\n    return returnValue;\n  }; // ----- helper methods ----- //\n\n  /**\n   * getter method for getting filtered item elements\n   * @returns {Array} elems - collection of item elements\n   */\n\n\n  proto.getFilteredItemElements = function () {\n    return this.filteredItems.map(function (item) {\n      return item.element;\n    });\n  }; // -----  ----- //\n\n\n  return Isotope;\n});","map":{"version":3,"sources":["/home/talha/projects/Rails/portfolio/app/javascript/packs/isotope.pkgd.js"],"names":["console","log","window","factory","define","amd","jQuery","module","exports","require","jQueryBridget","arraySlice","Array","prototype","slice","logError","message","error","namespace","PluginClass","$","option","opts","isPlainObject","options","extend","fn","arg0","args","call","arguments","methodCall","plainCall","$elems","methodName","returnValue","pluginMethodStr","each","i","elem","instance","data","method","charAt","value","apply","undefined","_init","updateJQuery","bridget","global","EvEmitter","proto","on","eventName","listener","events","_events","listeners","indexOf","push","once","onceEvents","_onceEvents","onceListeners","off","length","index","splice","emitEvent","isOnce","allOff","getSize","getStyleSize","num","parseFloat","isValid","isNaN","noop","measurements","measurementsLength","getZeroSize","size","width","height","innerWidth","innerHeight","outerWidth","outerHeight","measurement","getStyle","style","getComputedStyle","isSetup","isBoxSizeOuter","setup","div","document","createElement","padding","borderStyle","borderWidth","boxSizing","body","documentElement","appendChild","Math","round","removeChild","querySelector","nodeType","display","offsetWidth","offsetHeight","isBorderBox","paddingWidth","paddingLeft","paddingRight","paddingHeight","paddingTop","paddingBottom","marginWidth","marginLeft","marginRight","marginHeight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderHeight","borderTopWidth","borderBottomWidth","isBorderBoxSizeOuter","styleWidth","styleHeight","matchesSelector","matchesMethod","ElemProto","Element","matches","prefixes","prefix","selector","fizzyUIUtils","utils","a","b","prop","modulo","makeArray","obj","isArray","isArrayLike","removeFrom","ary","getParent","parentNode","getQueryElement","handleEvent","event","type","filterFindElements","elems","ffElems","forEach","HTMLElement","childElems","querySelectorAll","debounceMethod","_class","threshold","timeoutName","timeout","clearTimeout","_this","setTimeout","docReady","callback","readyState","addEventListener","toDashed","str","replace","match","$1","$2","toLowerCase","htmlInit","WidgetClass","dashedNamespace","dataAttr","dataAttrElems","jsDashElems","concat","dataOptionsAttr","attr","getAttribute","JSON","parse","className","Outlayer","Item","isEmptyObj","docElemStyle","transitionProperty","transition","transformProperty","transform","transitionEndEvent","WebkitTransition","vendorProperties","transitionDuration","transitionDelay","element","layout","position","x","y","_create","Object","create","constructor","_transn","ingProperties","clean","onEnd","css","elemStyle","supportedProp","getPosition","isOriginLeft","_getOption","isOriginTop","xValue","yValue","layoutSize","layoutPosition","xPadding","xProperty","xResetProperty","getXValue","yPadding","yProperty","yResetProperty","getYValue","isHorizontal","percentPosition","_transitionTo","curX","curY","didNotMove","setPosition","isTransitioning","transX","transY","transitionStyle","getTranslate","to","onTransitionEnd","isCleaning","goTo","moveTo","_nonTransition","_removeStyles","_transition","from","h","enableTransition","toDashedAll","transitionProps","duration","staggerDelay","onwebkitTransitionEnd","ontransitionend","onotransitionend","dashedVendorProperties","target","propertyName","disableTransition","removeTransitionStyles","removeEventListener","cleanStyle","cleanTransitionStyle","stagger","delay","removeElem","remove","hide","reveal","isHidden","transitionEndProperty","getHideRevealTransitionEndProperty","onRevealTransitionEnd","hiddenStyle","visibleStyle","styleProperty","optionStyle","opacity","onHideTransitionEnd","destroy","left","right","top","bottom","GUID","instances","queryElement","$element","defaults","id","outlayerGUID","isInitLayout","containerStyle","initLayout","originLeft","originTop","resize","resizeContainer","oldOption","compatOptions","horizontal","layoutInstant","reloadItems","stamps","stamp","canBindResize","bindResize","items","_itemize","children","itemElems","_filterFindItemElements","item","itemSelector","getItemElements","map","_resetLayout","_manageStamps","isInstant","_isLayoutInited","layoutItems","_getMeasurement","_getItemsForLayout","_layoutItems","_postLayout","filter","isIgnored","_emitCompleteOnItems","queue","_getItemLayoutPosition","isLayoutInstant","_processLayoutQueue","updateStagger","_positionItem","getMilliseconds","isResizingContainer","_getContainerSize","_setContainerMeasure","measure","isWidth","elemSize","max","onComplete","dispatchEvent","count","doneCount","tick","emitArgs","$event","Event","trigger","ignore","getItem","unignore","_find","unstamp","_getBoundingRect","_manageStamp","boundingRect","getBoundingClientRect","_boundingRect","_getElementOffset","thisRect","offset","isResizeBound","unbindResize","onresize","needsResizeLayout","hasSizes","addItems","appended","prepended","previousItems","revealItemElements","getItems","hideItemElements","removeItems","removeData","Layout","subclass","Parent","SubClass","msUnits","ms","s","time","unit","mult","Isotope","itemGUID","sortData","updateSortData","random","getSortData","sorters","_sorters","key","sorter","_destroy","LayoutMode","isotope","filteredItems","facadeMethods","needsVerticalResizeLayout","getColumnWidth","getSegmentSize","getRowHeight","segment","segmentName","outerSize","firstItemSize","getFirstItemSize","firstItem","modes","Mode","Masonry","fitWidth","measureColumns","colYs","cols","maxY","horizontalColIndex","getContainerWidth","columnWidth","firstItemElem","containerWidth","gutter","excess","mathMethod","isFitWidth","container","remainder","colSpan","min","colPosMethod","horizontalOrder","colPosition","col","setHeight","setMax","_getTopColPosition","colGroup","_getTopColGroup","minimumY","groupCount","_getColGroupY","groupColYs","_getHorizontalColPosition","isOver","hasSize","stampSize","firstX","lastX","firstCol","floor","lastCol","stampMaxY","_getContainerFitWidth","unusedCols","previousWidth","MasonryMode","keepModeMethods","FitRows","itemWidth","Vertical","horizontalAlignment","trim","String","layoutMode","isJQueryFiltering","sortAscending","_getSorters","sortHistory","name","_initLayoutMode","_updateItemsSortData","initialOpts","arrange","_layout","_getIsInstant","filtered","_filter","_bindArrangeComplete","_isInstant","_noTransition","_hideReveal","_sort","needReveal","needHide","isLayoutComplete","isHideComplete","isRevealComplete","arrangeParallelCallback","hiddenMatched","visibleUnmatched","test","_getFilterTest","isMatched","is","mungeSorter","len","split","query","attrMatch","getValue","getValueGetter","parser","sortDataParsers","getChildText","child","textContent","val","parseInt","sortBy","sortBys","_getIsSameSortBy","itemSorter","getItemSorter","sort","sortAsc","itemA","itemB","isAscending","direction","_mode","mode","Error","_filterRevealAdded","insert","filteredInsertItems","_remove","shuffle","getFilteredItemElements"],"mappings":"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","sourcesContent":["/*!\n * Isotope PACKAGED v3.0.6\n *\n * Licensed GPLv3 for open source use\n * or Isotope Commercial License for commercial use\n *\n * https://isotope.metafizzy.co\n * Copyright 2010-2018 Metafizzy\n */\n\n/**\n * Bridget makes jQuery widgets\n * v2.0.1\n * MIT license\n */\n\n/* jshint browser: true, strict: true, undef: true, unused: true */\nconsole.log('holaaaaaa');\n(function (window, factory) {\n  // universal module definition\n  /*jshint strict: false */ /* globals define, module, require */\n  if (typeof define == 'function' && define.amd) {\n    // AMD\n    define('jquery-bridget/jquery-bridget', ['jquery'], function (jQuery) {\n      return factory(window, jQuery);\n    });\n  } else if (typeof module == 'object' && module.exports) {\n    // CommonJS\n    module.exports = factory(\n      window,\n      require('jquery')\n    );\n  } else {\n    // browser global\n    window.jQueryBridget = factory(\n      window,\n      window.jQuery\n    );\n  }\n\n}(window, function factory(window, jQuery) {\n  'use strict';\n\n  // ----- utils ----- //\n\n  var arraySlice = Array.prototype.slice;\n\n  // helper function for logging errors\n  // $.error breaks jQuery chaining\n  var console = window.console;\n  var logError = typeof console == 'undefined' ? function () { } :\n    function (message) {\n      console.error(message);\n    };\n\n  // ----- jQueryBridget ----- //\n\n  function jQueryBridget(namespace, PluginClass, $) {\n    $ = $ || jQuery || window.jQuery;\n    if (!$) {\n      return;\n    }\n\n    // add option method -> $().plugin('option', {...})\n    if (!PluginClass.prototype.option) {\n      // option setter\n      PluginClass.prototype.option = function (opts) {\n        // bail out if not an object\n        if (!$.isPlainObject(opts)) {\n          return;\n        }\n        this.options = $.extend(true, this.options, opts);\n      };\n    }\n\n    // make jQuery plugin\n    $.fn[namespace] = function (arg0 /*, arg1 */) {\n      if (typeof arg0 == 'string') {\n        // method call $().plugin( 'methodName', { options } )\n        // shift arguments by 1\n        var args = arraySlice.call(arguments, 1);\n        return methodCall(this, arg0, args);\n      }\n      // just $().plugin({ options })\n      plainCall(this, arg0);\n      return this;\n    };\n\n    // $().plugin('methodName')\n    function methodCall($elems, methodName, args) {\n      var returnValue;\n      var pluginMethodStr = '$().' + namespace + '(\"' + methodName + '\")';\n\n      $elems.each(function (i, elem) {\n        // get instance\n        var instance = $.data(elem, namespace);\n        if (!instance) {\n          logError(namespace + ' not initialized. Cannot call methods, i.e. ' +\n            pluginMethodStr);\n          return;\n        }\n\n        var method = instance[methodName];\n        if (!method || methodName.charAt(0) == '_') {\n          logError(pluginMethodStr + ' is not a valid method');\n          return;\n        }\n\n        // apply method, get return value\n        var value = method.apply(instance, args);\n        // set return value if value is returned, use only first value\n        returnValue = returnValue === undefined ? value : returnValue;\n      });\n\n      return returnValue !== undefined ? returnValue : $elems;\n    }\n\n    function plainCall($elems, options) {\n      $elems.each(function (i, elem) {\n        var instance = $.data(elem, namespace);\n        if (instance) {\n          // set options & init\n          instance.option(options);\n          instance._init();\n        } else {\n          // initialize new instance\n          instance = new PluginClass(elem, options);\n          $.data(elem, namespace, instance);\n        }\n      });\n    }\n\n    updateJQuery($);\n\n  }\n\n  // ----- updateJQuery ----- //\n\n  // set $.bridget for v1 backwards compatibility\n  function updateJQuery($) {\n    if (!$ || ($ && $.bridget)) {\n      return;\n    }\n    $.bridget = jQueryBridget;\n  }\n\n  updateJQuery(jQuery || window.jQuery);\n\n  // -----  ----- //\n\n  return jQueryBridget;\n\n}));\n\n/**\n * EvEmitter v1.1.0\n * Lil' event emitter\n * MIT License\n */\n\n/* jshint unused: true, undef: true, strict: true */\n\n(function (global, factory) {\n  // universal module definition\n  /* jshint strict: false */ /* globals define, module, window */\n  if (typeof define == 'function' && define.amd) {\n    // AMD - RequireJS\n    define('ev-emitter/ev-emitter', factory);\n  } else if (typeof module == 'object' && module.exports) {\n    // CommonJS - Browserify, Webpack\n    module.exports = factory();\n  } else {\n    // Browser globals\n    global.EvEmitter = factory();\n  }\n\n}(typeof window != 'undefined' ? window : this, function () {\n\n\n\n  function EvEmitter() { }\n\n  var proto = EvEmitter.prototype;\n\n  proto.on = function (eventName, listener) {\n    if (!eventName || !listener) {\n      return;\n    }\n    // set events hash\n    var events = this._events = this._events || {};\n    // set listeners array\n    var listeners = events[eventName] = events[eventName] || [];\n    // only add once\n    if (listeners.indexOf(listener) == -1) {\n      listeners.push(listener);\n    }\n\n    return this;\n  };\n\n  proto.once = function (eventName, listener) {\n    if (!eventName || !listener) {\n      return;\n    }\n    // add event\n    this.on(eventName, listener);\n    // set once flag\n    // set onceEvents hash\n    var onceEvents = this._onceEvents = this._onceEvents || {};\n    // set onceListeners object\n    var onceListeners = onceEvents[eventName] = onceEvents[eventName] || {};\n    // set flag\n    onceListeners[listener] = true;\n\n    return this;\n  };\n\n  proto.off = function (eventName, listener) {\n    var listeners = this._events && this._events[eventName];\n    if (!listeners || !listeners.length) {\n      return;\n    }\n    var index = listeners.indexOf(listener);\n    if (index != -1) {\n      listeners.splice(index, 1);\n    }\n\n    return this;\n  };\n\n  proto.emitEvent = function (eventName, args) {\n    var listeners = this._events && this._events[eventName];\n    if (!listeners || !listeners.length) {\n      return;\n    }\n    // copy over to avoid interference if .off() in listener\n    listeners = listeners.slice(0);\n    args = args || [];\n    // once stuff\n    var onceListeners = this._onceEvents && this._onceEvents[eventName];\n\n    for (var i = 0; i < listeners.length; i++) {\n      var listener = listeners[i]\n      var isOnce = onceListeners && onceListeners[listener];\n      if (isOnce) {\n        // remove listener\n        // remove before trigger to prevent recursion\n        this.off(eventName, listener);\n        // unset once flag\n        delete onceListeners[listener];\n      }\n      // trigger listener\n      listener.apply(this, args);\n    }\n\n    return this;\n  };\n\n  proto.allOff = function () {\n    delete this._events;\n    delete this._onceEvents;\n  };\n\n  return EvEmitter;\n\n}));\n\n/*!\n * getSize v2.0.3\n * measure size of elements\n * MIT license\n */\n\n/* jshint browser: true, strict: true, undef: true, unused: true */\n/* globals console: false */\n\n(function (window, factory) {\n  /* jshint strict: false */ /* globals define, module */\n  if (typeof define == 'function' && define.amd) {\n    // AMD\n    define('get-size/get-size', factory);\n  } else if (typeof module == 'object' && module.exports) {\n    // CommonJS\n    module.exports = factory();\n  } else {\n    // browser global\n    window.getSize = factory();\n  }\n\n})(window, function factory() {\n  'use strict';\n\n  // -------------------------- helpers -------------------------- //\n\n  // get a number from a string, not a percentage\n  function getStyleSize(value) {\n    var num = parseFloat(value);\n    // not a percent like '100%', and a number\n    var isValid = value.indexOf('%') == -1 && !isNaN(num);\n    return isValid && num;\n  }\n\n  function noop() { }\n\n  var logError = typeof console == 'undefined' ? noop :\n    function (message) {\n      console.error(message);\n    };\n\n  // -------------------------- measurements -------------------------- //\n\n  var measurements = [\n    'paddingLeft',\n    'paddingRight',\n    'paddingTop',\n    'paddingBottom',\n    'marginLeft',\n    'marginRight',\n    'marginTop',\n    'marginBottom',\n    'borderLeftWidth',\n    'borderRightWidth',\n    'borderTopWidth',\n    'borderBottomWidth'\n  ];\n\n  var measurementsLength = measurements.length;\n\n  function getZeroSize() {\n    var size = {\n      width: 0,\n      height: 0,\n      innerWidth: 0,\n      innerHeight: 0,\n      outerWidth: 0,\n      outerHeight: 0\n    };\n    for (var i = 0; i < measurementsLength; i++) {\n      var measurement = measurements[i];\n      size[measurement] = 0;\n    }\n    return size;\n  }\n\n  // -------------------------- getStyle -------------------------- //\n\n  /**\n   * getStyle, get style of element, check for Firefox bug\n   * https://bugzilla.mozilla.org/show_bug.cgi?id=548397\n   */\n  function getStyle(elem) {\n    var style = getComputedStyle(elem);\n    if (!style) {\n      logError('Style returned ' + style +\n        '. Are you running this code in a hidden iframe on Firefox? ' +\n        'See https://bit.ly/getsizebug1');\n    }\n    return style;\n  }\n\n  // -------------------------- setup -------------------------- //\n\n  var isSetup = false;\n\n  var isBoxSizeOuter;\n\n  /**\n   * setup\n   * check isBoxSizerOuter\n   * do on first getSize() rather than on page load for Firefox bug\n   */\n  function setup() {\n    // setup once\n    if (isSetup) {\n      return;\n    }\n    isSetup = true;\n\n    // -------------------------- box sizing -------------------------- //\n\n    /**\n     * Chrome & Safari measure the outer-width on style.width on border-box elems\n     * IE11 & Firefox<29 measures the inner-width\n     */\n    var div = document.createElement('div');\n    div.style.width = '200px';\n    div.style.padding = '1px 2px 3px 4px';\n    div.style.borderStyle = 'solid';\n    div.style.borderWidth = '1px 2px 3px 4px';\n    div.style.boxSizing = 'border-box';\n\n    var body = document.body || document.documentElement;\n    body.appendChild(div);\n    var style = getStyle(div);\n    // round value for browser zoom. desandro/masonry#928\n    isBoxSizeOuter = Math.round(getStyleSize(style.width)) == 200;\n    getSize.isBoxSizeOuter = isBoxSizeOuter;\n\n    body.removeChild(div);\n  }\n\n  // -------------------------- getSize -------------------------- //\n\n  function getSize(elem) {\n    setup();\n\n    // use querySeletor if elem is string\n    if (typeof elem == 'string') {\n      elem = document.querySelector(elem);\n    }\n\n    // do not proceed on non-objects\n    if (!elem || typeof elem != 'object' || !elem.nodeType) {\n      return;\n    }\n\n    var style = getStyle(elem);\n\n    // if hidden, everything is 0\n    if (style.display == 'none') {\n      return getZeroSize();\n    }\n\n    var size = {};\n    size.width = elem.offsetWidth;\n    size.height = elem.offsetHeight;\n\n    var isBorderBox = size.isBorderBox = style.boxSizing == 'border-box';\n\n    // get all measurements\n    for (var i = 0; i < measurementsLength; i++) {\n      var measurement = measurements[i];\n      var value = style[measurement];\n      var num = parseFloat(value);\n      // any 'auto', 'medium' value will be 0\n      size[measurement] = !isNaN(num) ? num : 0;\n    }\n\n    var paddingWidth = size.paddingLeft + size.paddingRight;\n    var paddingHeight = size.paddingTop + size.paddingBottom;\n    var marginWidth = size.marginLeft + size.marginRight;\n    var marginHeight = size.marginTop + size.marginBottom;\n    var borderWidth = size.borderLeftWidth + size.borderRightWidth;\n    var borderHeight = size.borderTopWidth + size.borderBottomWidth;\n\n    var isBorderBoxSizeOuter = isBorderBox && isBoxSizeOuter;\n\n    // overwrite width and height if we can get it from style\n    var styleWidth = getStyleSize(style.width);\n    if (styleWidth !== false) {\n      size.width = styleWidth +\n        // add padding and border unless it's already including it\n        (isBorderBoxSizeOuter ? 0 : paddingWidth + borderWidth);\n    }\n\n    var styleHeight = getStyleSize(style.height);\n    if (styleHeight !== false) {\n      size.height = styleHeight +\n        // add padding and border unless it's already including it\n        (isBorderBoxSizeOuter ? 0 : paddingHeight + borderHeight);\n    }\n\n    size.innerWidth = size.width - (paddingWidth + borderWidth);\n    size.innerHeight = size.height - (paddingHeight + borderHeight);\n\n    size.outerWidth = size.width + marginWidth;\n    size.outerHeight = size.height + marginHeight;\n\n    return size;\n  }\n\n  return getSize;\n\n});\n\n/**\n * matchesSelector v2.0.2\n * matchesSelector( element, '.selector' )\n * MIT license\n */\n\n/*jshint browser: true, strict: true, undef: true, unused: true */\n\n(function (window, factory) {\n  /*global define: false, module: false */\n  'use strict';\n  // universal module definition\n  if (typeof define == 'function' && define.amd) {\n    // AMD\n    define('desandro-matches-selector/matches-selector', factory);\n  } else if (typeof module == 'object' && module.exports) {\n    // CommonJS\n    module.exports = factory();\n  } else {\n    // browser global\n    window.matchesSelector = factory();\n  }\n\n}(window, function factory() {\n  'use strict';\n\n  var matchesMethod = (function () {\n    var ElemProto = window.Element.prototype;\n    // check for the standard method name first\n    if (ElemProto.matches) {\n      return 'matches';\n    }\n    // check un-prefixed\n    if (ElemProto.matchesSelector) {\n      return 'matchesSelector';\n    }\n    // check vendor prefixes\n    var prefixes = ['webkit', 'moz', 'ms', 'o'];\n\n    for (var i = 0; i < prefixes.length; i++) {\n      var prefix = prefixes[i];\n      var method = prefix + 'MatchesSelector';\n      if (ElemProto[method]) {\n        return method;\n      }\n    }\n  })();\n\n  return function matchesSelector(elem, selector) {\n    return elem[matchesMethod](selector);\n  };\n\n}));\n\n/**\n * Fizzy UI utils v2.0.7\n * MIT license\n */\n\n/*jshint browser: true, undef: true, unused: true, strict: true */\n\n(function (window, factory) {\n  // universal module definition\n  /*jshint strict: false */ /*globals define, module, require */\n\n  if (typeof define == 'function' && define.amd) {\n    // AMD\n    define('fizzy-ui-utils/utils', [\n      'desandro-matches-selector/matches-selector'\n    ], function (matchesSelector) {\n      return factory(window, matchesSelector);\n    });\n  } else if (typeof module == 'object' && module.exports) {\n    // CommonJS\n    module.exports = factory(\n      window,\n      require('desandro-matches-selector')\n    );\n  } else {\n    // browser global\n    window.fizzyUIUtils = factory(\n      window,\n      window.matchesSelector\n    );\n  }\n\n}(window, function factory(window, matchesSelector) {\n\n\n\n  var utils = {};\n\n  // ----- extend ----- //\n\n  // extends objects\n  utils.extend = function (a, b) {\n    for (var prop in b) {\n      a[prop] = b[prop];\n    }\n    return a;\n  };\n\n  // ----- modulo ----- //\n\n  utils.modulo = function (num, div) {\n    return ((num % div) + div) % div;\n  };\n\n  // ----- makeArray ----- //\n\n  var arraySlice = Array.prototype.slice;\n\n  // turn element or nodeList into an array\n  utils.makeArray = function (obj) {\n    if (Array.isArray(obj)) {\n      // use object if already an array\n      return obj;\n    }\n    // return empty array if undefined or null. #6\n    if (obj === null || obj === undefined) {\n      return [];\n    }\n\n    var isArrayLike = typeof obj == 'object' && typeof obj.length == 'number';\n    if (isArrayLike) {\n      // convert nodeList to array\n      return arraySlice.call(obj);\n    }\n\n    // array of single index\n    return [obj];\n  };\n\n  // ----- removeFrom ----- //\n\n  utils.removeFrom = function (ary, obj) {\n    var index = ary.indexOf(obj);\n    if (index != -1) {\n      ary.splice(index, 1);\n    }\n  };\n\n  // ----- getParent ----- //\n\n  utils.getParent = function (elem, selector) {\n    while (elem.parentNode && elem != document.body) {\n      elem = elem.parentNode;\n      if (matchesSelector(elem, selector)) {\n        return elem;\n      }\n    }\n  };\n\n  // ----- getQueryElement ----- //\n\n  // use element as selector string\n  utils.getQueryElement = function (elem) {\n    if (typeof elem == 'string') {\n      return document.querySelector(elem);\n    }\n    return elem;\n  };\n\n  // ----- handleEvent ----- //\n\n  // enable .ontype to trigger from .addEventListener( elem, 'type' )\n  utils.handleEvent = function (event) {\n    var method = 'on' + event.type;\n    if (this[method]) {\n      this[method](event);\n    }\n  };\n\n  // ----- filterFindElements ----- //\n\n  utils.filterFindElements = function (elems, selector) {\n    // make array of elems\n    elems = utils.makeArray(elems);\n    var ffElems = [];\n\n    elems.forEach(function (elem) {\n      // check that elem is an actual element\n      if (!(elem instanceof HTMLElement)) {\n        return;\n      }\n      // add elem if no selector\n      if (!selector) {\n        ffElems.push(elem);\n        return;\n      }\n      // filter & find items if we have a selector\n      // filter\n      if (matchesSelector(elem, selector)) {\n        ffElems.push(elem);\n      }\n      // find children\n      var childElems = elem.querySelectorAll(selector);\n      // concat childElems to filterFound array\n      for (var i = 0; i < childElems.length; i++) {\n        ffElems.push(childElems[i]);\n      }\n    });\n\n    return ffElems;\n  };\n\n  // ----- debounceMethod ----- //\n\n  utils.debounceMethod = function (_class, methodName, threshold) {\n    threshold = threshold || 100;\n    // original method\n    var method = _class.prototype[methodName];\n    var timeoutName = methodName + 'Timeout';\n\n    _class.prototype[methodName] = function () {\n      var timeout = this[timeoutName];\n      clearTimeout(timeout);\n\n      var args = arguments;\n      var _this = this;\n      this[timeoutName] = setTimeout(function () {\n        method.apply(_this, args);\n        delete _this[timeoutName];\n      }, threshold);\n    };\n  };\n\n  // ----- docReady ----- //\n\n  utils.docReady = function (callback) {\n    var readyState = document.readyState;\n    if (readyState == 'complete' || readyState == 'interactive') {\n      // do async to allow for other scripts to run. metafizzy/flickity#441\n      setTimeout(callback);\n    } else {\n      document.addEventListener('DOMContentLoaded', callback);\n    }\n  };\n\n  // ----- htmlInit ----- //\n\n  // http://jamesroberts.name/blog/2010/02/22/string-functions-for-javascript-trim-to-camel-case-to-dashed-and-to-underscore/\n  utils.toDashed = function (str) {\n    return str.replace(/(.)([A-Z])/g, function (match, $1, $2) {\n      return $1 + '-' + $2;\n    }).toLowerCase();\n  };\n\n  var console = window.console;\n  /**\n   * allow user to initialize classes via [data-namespace] or .js-namespace class\n   * htmlInit( Widget, 'widgetName' )\n   * options are parsed from data-namespace-options\n   */\n  utils.htmlInit = function (WidgetClass, namespace) {\n    utils.docReady(function () {\n      var dashedNamespace = utils.toDashed(namespace);\n      var dataAttr = 'data-' + dashedNamespace;\n      var dataAttrElems = document.querySelectorAll('[' + dataAttr + ']');\n      var jsDashElems = document.querySelectorAll('.js-' + dashedNamespace);\n      var elems = utils.makeArray(dataAttrElems)\n        .concat(utils.makeArray(jsDashElems));\n      var dataOptionsAttr = dataAttr + '-options';\n      var jQuery = window.jQuery;\n\n      elems.forEach(function (elem) {\n        var attr = elem.getAttribute(dataAttr) ||\n          elem.getAttribute(dataOptionsAttr);\n        var options;\n        try {\n          options = attr && JSON.parse(attr);\n        } catch (error) {\n          // log error, do not initialize\n          if (console) {\n            console.error('Error parsing ' + dataAttr + ' on ' + elem.className +\n              ': ' + error);\n          }\n          return;\n        }\n        // initialize\n        var instance = new WidgetClass(elem, options);\n        // make available via $().data('namespace')\n        if (jQuery) {\n          jQuery.data(elem, namespace, instance);\n        }\n      });\n\n    });\n  };\n\n  // -----  ----- //\n\n  return utils;\n\n}));\n\n/**\n * Outlayer Item\n */\n\n(function (window, factory) {\n  // universal module definition\n  /* jshint strict: false */ /* globals define, module, require */\n  if (typeof define == 'function' && define.amd) {\n    // AMD - RequireJS\n    define('outlayer/item', [\n      'ev-emitter/ev-emitter',\n      'get-size/get-size'\n    ],\n      factory\n    );\n  } else if (typeof module == 'object' && module.exports) {\n    // CommonJS - Browserify, Webpack\n    module.exports = factory(\n      require('ev-emitter'),\n      require('get-size')\n    );\n  } else {\n    // browser global\n    window.Outlayer = {};\n    window.Outlayer.Item = factory(\n      window.EvEmitter,\n      window.getSize\n    );\n  }\n\n}(window, function factory(EvEmitter, getSize) {\n  'use strict';\n\n  // ----- helpers ----- //\n\n  function isEmptyObj(obj) {\n    for (var prop in obj) {\n      return false;\n    }\n    prop = null;\n    return true;\n  }\n\n  // -------------------------- CSS3 support -------------------------- //\n\n\n  var docElemStyle = document.documentElement.style;\n\n  var transitionProperty = typeof docElemStyle.transition == 'string' ?\n    'transition' : 'WebkitTransition';\n  var transformProperty = typeof docElemStyle.transform == 'string' ?\n    'transform' : 'WebkitTransform';\n\n  var transitionEndEvent = {\n    WebkitTransition: 'webkitTransitionEnd',\n    transition: 'transitionend'\n  }[transitionProperty];\n\n  // cache all vendor properties that could have vendor prefix\n  var vendorProperties = {\n    transform: transformProperty,\n    transition: transitionProperty,\n    transitionDuration: transitionProperty + 'Duration',\n    transitionProperty: transitionProperty + 'Property',\n    transitionDelay: transitionProperty + 'Delay'\n  };\n\n  // -------------------------- Item -------------------------- //\n\n  function Item(element, layout) {\n    if (!element) {\n      return;\n    }\n\n    this.element = element;\n    // parent layout class, i.e. Masonry, Isotope, or Packery\n    this.layout = layout;\n    this.position = {\n      x: 0,\n      y: 0\n    };\n\n    this._create();\n  }\n\n  // inherit EvEmitter\n  var proto = Item.prototype = Object.create(EvEmitter.prototype);\n  proto.constructor = Item;\n\n  proto._create = function () {\n    // transition objects\n    this._transn = {\n      ingProperties: {},\n      clean: {},\n      onEnd: {}\n    };\n\n    this.css({\n      position: 'absolute'\n    });\n  };\n\n  // trigger specified handler for event type\n  proto.handleEvent = function (event) {\n    var method = 'on' + event.type;\n    if (this[method]) {\n      this[method](event);\n    }\n  };\n\n  proto.getSize = function () {\n    this.size = getSize(this.element);\n  };\n\n  /**\n   * apply CSS styles to element\n   * @param {Object} style\n   */\n  proto.css = function (style) {\n    var elemStyle = this.element.style;\n\n    for (var prop in style) {\n      // use vendor property if available\n      var supportedProp = vendorProperties[prop] || prop;\n      elemStyle[supportedProp] = style[prop];\n    }\n  };\n\n  // measure position, and sets it\n  proto.getPosition = function () {\n    var style = getComputedStyle(this.element);\n    var isOriginLeft = this.layout._getOption('originLeft');\n    var isOriginTop = this.layout._getOption('originTop');\n    var xValue = style[isOriginLeft ? 'left' : 'right'];\n    var yValue = style[isOriginTop ? 'top' : 'bottom'];\n    var x = parseFloat(xValue);\n    var y = parseFloat(yValue);\n    // convert percent to pixels\n    var layoutSize = this.layout.size;\n    if (xValue.indexOf('%') != -1) {\n      x = (x / 100) * layoutSize.width;\n    }\n    if (yValue.indexOf('%') != -1) {\n      y = (y / 100) * layoutSize.height;\n    }\n    // clean up 'auto' or other non-integer values\n    x = isNaN(x) ? 0 : x;\n    y = isNaN(y) ? 0 : y;\n    // remove padding from measurement\n    x -= isOriginLeft ? layoutSize.paddingLeft : layoutSize.paddingRight;\n    y -= isOriginTop ? layoutSize.paddingTop : layoutSize.paddingBottom;\n\n    this.position.x = x;\n    this.position.y = y;\n  };\n\n  // set settled position, apply padding\n  proto.layoutPosition = function () {\n    var layoutSize = this.layout.size;\n    var style = {};\n    var isOriginLeft = this.layout._getOption('originLeft');\n    var isOriginTop = this.layout._getOption('originTop');\n\n    // x\n    var xPadding = isOriginLeft ? 'paddingLeft' : 'paddingRight';\n    var xProperty = isOriginLeft ? 'left' : 'right';\n    var xResetProperty = isOriginLeft ? 'right' : 'left';\n\n    var x = this.position.x + layoutSize[xPadding];\n    // set in percentage or pixels\n    style[xProperty] = this.getXValue(x);\n    // reset other property\n    style[xResetProperty] = '';\n\n    // y\n    var yPadding = isOriginTop ? 'paddingTop' : 'paddingBottom';\n    var yProperty = isOriginTop ? 'top' : 'bottom';\n    var yResetProperty = isOriginTop ? 'bottom' : 'top';\n\n    var y = this.position.y + layoutSize[yPadding];\n    // set in percentage or pixels\n    style[yProperty] = this.getYValue(y);\n    // reset other property\n    style[yResetProperty] = '';\n\n    this.css(style);\n    this.emitEvent('layout', [this]);\n  };\n\n  proto.getXValue = function (x) {\n    var isHorizontal = this.layout._getOption('horizontal');\n    return this.layout.options.percentPosition && !isHorizontal ?\n      ((x / this.layout.size.width) * 100) + '%' : x + 'px';\n  };\n\n  proto.getYValue = function (y) {\n    var isHorizontal = this.layout._getOption('horizontal');\n    return this.layout.options.percentPosition && isHorizontal ?\n      ((y / this.layout.size.height) * 100) + '%' : y + 'px';\n  };\n\n  proto._transitionTo = function (x, y) {\n    this.getPosition();\n    // get current x & y from top/left\n    var curX = this.position.x;\n    var curY = this.position.y;\n\n    var didNotMove = x == this.position.x && y == this.position.y;\n\n    // save end position\n    this.setPosition(x, y);\n\n    // if did not move and not transitioning, just go to layout\n    if (didNotMove && !this.isTransitioning) {\n      this.layoutPosition();\n      return;\n    }\n\n    var transX = x - curX;\n    var transY = y - curY;\n    var transitionStyle = {};\n    transitionStyle.transform = this.getTranslate(transX, transY);\n\n    this.transition({\n      to: transitionStyle,\n      onTransitionEnd: {\n        transform: this.layoutPosition\n      },\n      isCleaning: true\n    });\n  };\n\n  proto.getTranslate = function (x, y) {\n    // flip cooridinates if origin on right or bottom\n    var isOriginLeft = this.layout._getOption('originLeft');\n    var isOriginTop = this.layout._getOption('originTop');\n    x = isOriginLeft ? x : -x;\n    y = isOriginTop ? y : -y;\n    return 'translate3d(' + x + 'px, ' + y + 'px, 0)';\n  };\n\n  // non transition + transform support\n  proto.goTo = function (x, y) {\n    this.setPosition(x, y);\n    this.layoutPosition();\n  };\n\n  proto.moveTo = proto._transitionTo;\n\n  proto.setPosition = function (x, y) {\n    this.position.x = parseFloat(x);\n    this.position.y = parseFloat(y);\n  };\n\n  // ----- transition ----- //\n\n  /**\n   * @param {Object} style - CSS\n   * @param {Function} onTransitionEnd\n   */\n\n  // non transition, just trigger callback\n  proto._nonTransition = function (args) {\n    this.css(args.to);\n    if (args.isCleaning) {\n      this._removeStyles(args.to);\n    }\n    for (var prop in args.onTransitionEnd) {\n      args.onTransitionEnd[prop].call(this);\n    }\n  };\n\n  /**\n   * proper transition\n   * @param {Object} args - arguments\n   *   @param {Object} to - style to transition to\n   *   @param {Object} from - style to start transition from\n   *   @param {Boolean} isCleaning - removes transition styles after transition\n   *   @param {Function} onTransitionEnd - callback\n   */\n  proto.transition = function (args) {\n    // redirect to nonTransition if no transition duration\n    if (!parseFloat(this.layout.options.transitionDuration)) {\n      this._nonTransition(args);\n      return;\n    }\n\n    var _transition = this._transn;\n    // keep track of onTransitionEnd callback by css property\n    for (var prop in args.onTransitionEnd) {\n      _transition.onEnd[prop] = args.onTransitionEnd[prop];\n    }\n    // keep track of properties that are transitioning\n    for (prop in args.to) {\n      _transition.ingProperties[prop] = true;\n      // keep track of properties to clean up when transition is done\n      if (args.isCleaning) {\n        _transition.clean[prop] = true;\n      }\n    }\n\n    // set from styles\n    if (args.from) {\n      this.css(args.from);\n      // force redraw. http://blog.alexmaccaw.com/css-transitions\n      var h = this.element.offsetHeight;\n      // hack for JSHint to hush about unused var\n      h = null;\n    }\n    // enable transition\n    this.enableTransition(args.to);\n    // set styles that are transitioning\n    this.css(args.to);\n\n    this.isTransitioning = true;\n\n  };\n\n  // dash before all cap letters, including first for\n  // WebkitTransform => -webkit-transform\n  function toDashedAll(str) {\n    return str.replace(/([A-Z])/g, function ($1) {\n      return '-' + $1.toLowerCase();\n    });\n  }\n\n  var transitionProps = 'opacity,' + toDashedAll(transformProperty);\n\n  proto.enableTransition = function (/* style */) {\n    // HACK changing transitionProperty during a transition\n    // will cause transition to jump\n    if (this.isTransitioning) {\n      return;\n    }\n\n    // make `transition: foo, bar, baz` from style object\n    // HACK un-comment this when enableTransition can work\n    // while a transition is happening\n    // var transitionValues = [];\n    // for ( var prop in style ) {\n    //   // dash-ify camelCased properties like WebkitTransition\n    //   prop = vendorProperties[ prop ] || prop;\n    //   transitionValues.push( toDashedAll( prop ) );\n    // }\n    // munge number to millisecond, to match stagger\n    var duration = this.layout.options.transitionDuration;\n    duration = typeof duration == 'number' ? duration + 'ms' : duration;\n    // enable transition styles\n    this.css({\n      transitionProperty: transitionProps,\n      transitionDuration: duration,\n      transitionDelay: this.staggerDelay || 0\n    });\n    // listen for transition end event\n    this.element.addEventListener(transitionEndEvent, this, false);\n  };\n\n  // ----- events ----- //\n\n  proto.onwebkitTransitionEnd = function (event) {\n    this.ontransitionend(event);\n  };\n\n  proto.onotransitionend = function (event) {\n    this.ontransitionend(event);\n  };\n\n  // properties that I munge to make my life easier\n  var dashedVendorProperties = {\n    '-webkit-transform': 'transform'\n  };\n\n  proto.ontransitionend = function (event) {\n    // disregard bubbled events from children\n    if (event.target !== this.element) {\n      return;\n    }\n    var _transition = this._transn;\n    // get property name of transitioned property, convert to prefix-free\n    var propertyName = dashedVendorProperties[event.propertyName] || event.propertyName;\n\n    // remove property that has completed transitioning\n    delete _transition.ingProperties[propertyName];\n    // check if any properties are still transitioning\n    if (isEmptyObj(_transition.ingProperties)) {\n      // all properties have completed transitioning\n      this.disableTransition();\n    }\n    // clean style\n    if (propertyName in _transition.clean) {\n      // clean up style\n      this.element.style[event.propertyName] = '';\n      delete _transition.clean[propertyName];\n    }\n    // trigger onTransitionEnd callback\n    if (propertyName in _transition.onEnd) {\n      var onTransitionEnd = _transition.onEnd[propertyName];\n      onTransitionEnd.call(this);\n      delete _transition.onEnd[propertyName];\n    }\n\n    this.emitEvent('transitionEnd', [this]);\n  };\n\n  proto.disableTransition = function () {\n    this.removeTransitionStyles();\n    this.element.removeEventListener(transitionEndEvent, this, false);\n    this.isTransitioning = false;\n  };\n\n  /**\n   * removes style property from element\n   * @param {Object} style\n  **/\n  proto._removeStyles = function (style) {\n    // clean up transition styles\n    var cleanStyle = {};\n    for (var prop in style) {\n      cleanStyle[prop] = '';\n    }\n    this.css(cleanStyle);\n  };\n\n  var cleanTransitionStyle = {\n    transitionProperty: '',\n    transitionDuration: '',\n    transitionDelay: ''\n  };\n\n  proto.removeTransitionStyles = function () {\n    // remove transition\n    this.css(cleanTransitionStyle);\n  };\n\n  // ----- stagger ----- //\n\n  proto.stagger = function (delay) {\n    delay = isNaN(delay) ? 0 : delay;\n    this.staggerDelay = delay + 'ms';\n  };\n\n  // ----- show/hide/remove ----- //\n\n  // remove element from DOM\n  proto.removeElem = function () {\n    this.element.parentNode.removeChild(this.element);\n    // remove display: none\n    this.css({ display: '' });\n    this.emitEvent('remove', [this]);\n  };\n\n  proto.remove = function () {\n    // just remove element if no transition support or no transition\n    if (!transitionProperty || !parseFloat(this.layout.options.transitionDuration)) {\n      this.removeElem();\n      return;\n    }\n\n    // start transition\n    this.once('transitionEnd', function () {\n      this.removeElem();\n    });\n    this.hide();\n  };\n\n  proto.reveal = function () {\n    delete this.isHidden;\n    // remove display: none\n    this.css({ display: '' });\n\n    var options = this.layout.options;\n\n    var onTransitionEnd = {};\n    var transitionEndProperty = this.getHideRevealTransitionEndProperty('visibleStyle');\n    onTransitionEnd[transitionEndProperty] = this.onRevealTransitionEnd;\n\n    this.transition({\n      from: options.hiddenStyle,\n      to: options.visibleStyle,\n      isCleaning: true,\n      onTransitionEnd: onTransitionEnd\n    });\n  };\n\n  proto.onRevealTransitionEnd = function () {\n    // check if still visible\n    // during transition, item may have been hidden\n    if (!this.isHidden) {\n      this.emitEvent('reveal');\n    }\n  };\n\n  /**\n   * get style property use for hide/reveal transition end\n   * @param {String} styleProperty - hiddenStyle/visibleStyle\n   * @returns {String}\n   */\n  proto.getHideRevealTransitionEndProperty = function (styleProperty) {\n    var optionStyle = this.layout.options[styleProperty];\n    // use opacity\n    if (optionStyle.opacity) {\n      return 'opacity';\n    }\n    // get first property\n    for (var prop in optionStyle) {\n      return prop;\n    }\n  };\n\n  proto.hide = function () {\n    // set flag\n    this.isHidden = true;\n    // remove display: none\n    this.css({ display: '' });\n\n    var options = this.layout.options;\n\n    var onTransitionEnd = {};\n    var transitionEndProperty = this.getHideRevealTransitionEndProperty('hiddenStyle');\n    onTransitionEnd[transitionEndProperty] = this.onHideTransitionEnd;\n\n    this.transition({\n      from: options.visibleStyle,\n      to: options.hiddenStyle,\n      // keep hidden stuff hidden\n      isCleaning: true,\n      onTransitionEnd: onTransitionEnd\n    });\n  };\n\n  proto.onHideTransitionEnd = function () {\n    // check if still hidden\n    // during transition, item may have been un-hidden\n    if (this.isHidden) {\n      this.css({ display: 'none' });\n      this.emitEvent('hide');\n    }\n  };\n\n  proto.destroy = function () {\n    this.css({\n      position: '',\n      left: '',\n      right: '',\n      top: '',\n      bottom: '',\n      transition: '',\n      transform: ''\n    });\n  };\n\n  return Item;\n\n}));\n\n/*!\n * Outlayer v2.1.1\n * the brains and guts of a layout library\n * MIT license\n */\n\n(function (window, factory) {\n  'use strict';\n  // universal module definition\n  /* jshint strict: false */ /* globals define, module, require */\n  if (typeof define == 'function' && define.amd) {\n    // AMD - RequireJS\n    define('outlayer/outlayer', [\n      'ev-emitter/ev-emitter',\n      'get-size/get-size',\n      'fizzy-ui-utils/utils',\n      './item'\n    ],\n      function (EvEmitter, getSize, utils, Item) {\n        return factory(window, EvEmitter, getSize, utils, Item);\n      }\n    );\n  } else if (typeof module == 'object' && module.exports) {\n    // CommonJS - Browserify, Webpack\n    module.exports = factory(\n      window,\n      require('ev-emitter'),\n      require('get-size'),\n      require('fizzy-ui-utils'),\n      require('./item')\n    );\n  } else {\n    // browser global\n    window.Outlayer = factory(\n      window,\n      window.EvEmitter,\n      window.getSize,\n      window.fizzyUIUtils,\n      window.Outlayer.Item\n    );\n  }\n\n}(window, function factory(window, EvEmitter, getSize, utils, Item) {\n  'use strict';\n\n  // ----- vars ----- //\n\n  var console = window.console;\n  var jQuery = window.jQuery;\n  var noop = function () { };\n\n  // -------------------------- Outlayer -------------------------- //\n\n  // globally unique identifiers\n  var GUID = 0;\n  // internal store of all Outlayer intances\n  var instances = {};\n\n\n  /**\n   * @param {Element, String} element\n   * @param {Object} options\n   * @constructor\n   */\n  function Outlayer(element, options) {\n    var queryElement = utils.getQueryElement(element);\n    if (!queryElement) {\n      if (console) {\n        console.error('Bad element for ' + this.constructor.namespace +\n          ': ' + (queryElement || element));\n      }\n      return;\n    }\n    this.element = queryElement;\n    // add jQuery\n    if (jQuery) {\n      this.$element = jQuery(this.element);\n    }\n\n    // options\n    this.options = utils.extend({}, this.constructor.defaults);\n    this.option(options);\n\n    // add id for Outlayer.getFromElement\n    var id = ++GUID;\n    this.element.outlayerGUID = id; // expando\n    instances[id] = this; // associate via id\n\n    // kick it off\n    this._create();\n\n    var isInitLayout = this._getOption('initLayout');\n    if (isInitLayout) {\n      this.layout();\n    }\n  }\n\n  // settings are for internal use only\n  Outlayer.namespace = 'outlayer';\n  Outlayer.Item = Item;\n\n  // default options\n  Outlayer.defaults = {\n    containerStyle: {\n      position: 'relative'\n    },\n    initLayout: true,\n    originLeft: true,\n    originTop: true,\n    resize: true,\n    resizeContainer: true,\n    // item options\n    transitionDuration: '0.4s',\n    hiddenStyle: {\n      opacity: 0,\n      transform: 'scale(0.001)'\n    },\n    visibleStyle: {\n      opacity: 1,\n      transform: 'scale(1)'\n    }\n  };\n\n  var proto = Outlayer.prototype;\n  // inherit EvEmitter\n  utils.extend(proto, EvEmitter.prototype);\n\n  /**\n   * set options\n   * @param {Object} opts\n   */\n  proto.option = function (opts) {\n    utils.extend(this.options, opts);\n  };\n\n  /**\n   * get backwards compatible option value, check old name\n   */\n  proto._getOption = function (option) {\n    var oldOption = this.constructor.compatOptions[option];\n    return oldOption && this.options[oldOption] !== undefined ?\n      this.options[oldOption] : this.options[option];\n  };\n\n  Outlayer.compatOptions = {\n    // currentName: oldName\n    initLayout: 'isInitLayout',\n    horizontal: 'isHorizontal',\n    layoutInstant: 'isLayoutInstant',\n    originLeft: 'isOriginLeft',\n    originTop: 'isOriginTop',\n    resize: 'isResizeBound',\n    resizeContainer: 'isResizingContainer'\n  };\n\n  proto._create = function () {\n    // get items from children\n    this.reloadItems();\n    // elements that affect layout, but are not laid out\n    this.stamps = [];\n    this.stamp(this.options.stamp);\n    // set container style\n    utils.extend(this.element.style, this.options.containerStyle);\n\n    // bind resize method\n    var canBindResize = this._getOption('resize');\n    if (canBindResize) {\n      this.bindResize();\n    }\n  };\n\n  // goes through all children again and gets bricks in proper order\n  proto.reloadItems = function () {\n    // collection of item elements\n    this.items = this._itemize(this.element.children);\n  };\n\n\n  /**\n   * turn elements into Outlayer.Items to be used in layout\n   * @param {Array or NodeList or HTMLElement} elems\n   * @returns {Array} items - collection of new Outlayer Items\n   */\n  proto._itemize = function (elems) {\n\n    var itemElems = this._filterFindItemElements(elems);\n    var Item = this.constructor.Item;\n\n    // create new Outlayer Items for collection\n    var items = [];\n    for (var i = 0; i < itemElems.length; i++) {\n      var elem = itemElems[i];\n      var item = new Item(elem, this);\n      items.push(item);\n    }\n\n    return items;\n  };\n\n  /**\n   * get item elements to be used in layout\n   * @param {Array or NodeList or HTMLElement} elems\n   * @returns {Array} items - item elements\n   */\n  proto._filterFindItemElements = function (elems) {\n    return utils.filterFindElements(elems, this.options.itemSelector);\n  };\n\n  /**\n   * getter method for getting item elements\n   * @returns {Array} elems - collection of item elements\n   */\n  proto.getItemElements = function () {\n    return this.items.map(function (item) {\n      return item.element;\n    });\n  };\n\n  // ----- init & layout ----- //\n\n  /**\n   * lays out all items\n   */\n  proto.layout = function () {\n    this._resetLayout();\n    this._manageStamps();\n\n    // don't animate first layout\n    var layoutInstant = this._getOption('layoutInstant');\n    var isInstant = layoutInstant !== undefined ?\n      layoutInstant : !this._isLayoutInited;\n    this.layoutItems(this.items, isInstant);\n\n    // flag for initalized\n    this._isLayoutInited = true;\n  };\n\n  // _init is alias for layout\n  proto._init = proto.layout;\n\n  /**\n   * logic before any new layout\n   */\n  proto._resetLayout = function () {\n    this.getSize();\n  };\n\n\n  proto.getSize = function () {\n    this.size = getSize(this.element);\n  };\n\n  /**\n   * get measurement from option, for columnWidth, rowHeight, gutter\n   * if option is String -> get element from selector string, & get size of element\n   * if option is Element -> get size of element\n   * else use option as a number\n   *\n   * @param {String} measurement\n   * @param {String} size - width or height\n   * @private\n   */\n  proto._getMeasurement = function (measurement, size) {\n    var option = this.options[measurement];\n    var elem;\n    if (!option) {\n      // default to 0\n      this[measurement] = 0;\n    } else {\n      // use option as an element\n      if (typeof option == 'string') {\n        elem = this.element.querySelector(option);\n      } else if (option instanceof HTMLElement) {\n        elem = option;\n      }\n      // use size of element, if element\n      this[measurement] = elem ? getSize(elem)[size] : option;\n    }\n  };\n\n  /**\n   * layout a collection of item elements\n   * @api public\n   */\n  proto.layoutItems = function (items, isInstant) {\n    items = this._getItemsForLayout(items);\n\n    this._layoutItems(items, isInstant);\n\n    this._postLayout();\n  };\n\n  /**\n   * get the items to be laid out\n   * you may want to skip over some items\n   * @param {Array} items\n   * @returns {Array} items\n   */\n  proto._getItemsForLayout = function (items) {\n    return items.filter(function (item) {\n      return !item.isIgnored;\n    });\n  };\n\n  /**\n   * layout items\n   * @param {Array} items\n   * @param {Boolean} isInstant\n   */\n  proto._layoutItems = function (items, isInstant) {\n    this._emitCompleteOnItems('layout', items);\n\n    if (!items || !items.length) {\n      // no items, emit event with empty array\n      return;\n    }\n\n    var queue = [];\n\n    items.forEach(function (item) {\n      // get x/y object from method\n      var position = this._getItemLayoutPosition(item);\n      // enqueue\n      position.item = item;\n      position.isInstant = isInstant || item.isLayoutInstant;\n      queue.push(position);\n    }, this);\n\n    this._processLayoutQueue(queue);\n  };\n\n  /**\n   * get item layout position\n   * @param {Outlayer.Item} item\n   * @returns {Object} x and y position\n   */\n  proto._getItemLayoutPosition = function ( /* item */) {\n    return {\n      x: 0,\n      y: 0\n    };\n  };\n\n  /**\n   * iterate over array and position each item\n   * Reason being - separating this logic prevents 'layout invalidation'\n   * thx @paul_irish\n   * @param {Array} queue\n   */\n  proto._processLayoutQueue = function (queue) {\n    this.updateStagger();\n    queue.forEach(function (obj, i) {\n      this._positionItem(obj.item, obj.x, obj.y, obj.isInstant, i);\n    }, this);\n  };\n\n  // set stagger from option in milliseconds number\n  proto.updateStagger = function () {\n    var stagger = this.options.stagger;\n    if (stagger === null || stagger === undefined) {\n      this.stagger = 0;\n      return;\n    }\n    this.stagger = getMilliseconds(stagger);\n    return this.stagger;\n  };\n\n  /**\n   * Sets position of item in DOM\n   * @param {Outlayer.Item} item\n   * @param {Number} x - horizontal position\n   * @param {Number} y - vertical position\n   * @param {Boolean} isInstant - disables transitions\n   */\n  proto._positionItem = function (item, x, y, isInstant, i) {\n    if (isInstant) {\n      // if not transition, just set CSS\n      item.goTo(x, y);\n    } else {\n      item.stagger(i * this.stagger);\n      item.moveTo(x, y);\n    }\n  };\n\n  /**\n   * Any logic you want to do after each layout,\n   * i.e. size the container\n   */\n  proto._postLayout = function () {\n    this.resizeContainer();\n  };\n\n  proto.resizeContainer = function () {\n    var isResizingContainer = this._getOption('resizeContainer');\n    if (!isResizingContainer) {\n      return;\n    }\n    var size = this._getContainerSize();\n    if (size) {\n      this._setContainerMeasure(size.width, true);\n      this._setContainerMeasure(size.height, false);\n    }\n  };\n\n  /**\n   * Sets width or height of container if returned\n   * @returns {Object} size\n   *   @param {Number} width\n   *   @param {Number} height\n   */\n  proto._getContainerSize = noop;\n\n  /**\n   * @param {Number} measure - size of width or height\n   * @param {Boolean} isWidth\n   */\n  proto._setContainerMeasure = function (measure, isWidth) {\n    if (measure === undefined) {\n      return;\n    }\n\n    var elemSize = this.size;\n    // add padding and border width if border box\n    if (elemSize.isBorderBox) {\n      measure += isWidth ? elemSize.paddingLeft + elemSize.paddingRight +\n        elemSize.borderLeftWidth + elemSize.borderRightWidth :\n        elemSize.paddingBottom + elemSize.paddingTop +\n        elemSize.borderTopWidth + elemSize.borderBottomWidth;\n    }\n\n    measure = Math.max(measure, 0);\n    this.element.style[isWidth ? 'width' : 'height'] = measure + 'px';\n  };\n\n  /**\n   * emit eventComplete on a collection of items events\n   * @param {String} eventName\n   * @param {Array} items - Outlayer.Items\n   */\n  proto._emitCompleteOnItems = function (eventName, items) {\n    var _this = this;\n    function onComplete() {\n      _this.dispatchEvent(eventName + 'Complete', null, [items]);\n    }\n\n    var count = items.length;\n    if (!items || !count) {\n      onComplete();\n      return;\n    }\n\n    var doneCount = 0;\n    function tick() {\n      doneCount++;\n      if (doneCount == count) {\n        onComplete();\n      }\n    }\n\n    // bind callback\n    items.forEach(function (item) {\n      item.once(eventName, tick);\n    });\n  };\n\n  /**\n   * emits events via EvEmitter and jQuery events\n   * @param {String} type - name of event\n   * @param {Event} event - original event\n   * @param {Array} args - extra arguments\n   */\n  proto.dispatchEvent = function (type, event, args) {\n    // add original event to arguments\n    var emitArgs = event ? [event].concat(args) : args;\n    this.emitEvent(type, emitArgs);\n\n    if (jQuery) {\n      // set this.$element\n      this.$element = this.$element || jQuery(this.element);\n      if (event) {\n        // create jQuery event\n        var $event = jQuery.Event(event);\n        $event.type = type;\n        this.$element.trigger($event, args);\n      } else {\n        // just trigger with type if no event available\n        this.$element.trigger(type, args);\n      }\n    }\n  };\n\n  // -------------------------- ignore & stamps -------------------------- //\n\n\n  /**\n   * keep item in collection, but do not lay it out\n   * ignored items do not get skipped in layout\n   * @param {Element} elem\n   */\n  proto.ignore = function (elem) {\n    var item = this.getItem(elem);\n    if (item) {\n      item.isIgnored = true;\n    }\n  };\n\n  /**\n   * return item to layout collection\n   * @param {Element} elem\n   */\n  proto.unignore = function (elem) {\n    var item = this.getItem(elem);\n    if (item) {\n      delete item.isIgnored;\n    }\n  };\n\n  /**\n   * adds elements to stamps\n   * @param {NodeList, Array, Element, or String} elems\n   */\n  proto.stamp = function (elems) {\n    elems = this._find(elems);\n    if (!elems) {\n      return;\n    }\n\n    this.stamps = this.stamps.concat(elems);\n    // ignore\n    elems.forEach(this.ignore, this);\n  };\n\n  /**\n   * removes elements to stamps\n   * @param {NodeList, Array, or Element} elems\n   */\n  proto.unstamp = function (elems) {\n    elems = this._find(elems);\n    if (!elems) {\n      return;\n    }\n\n    elems.forEach(function (elem) {\n      // filter out removed stamp elements\n      utils.removeFrom(this.stamps, elem);\n      this.unignore(elem);\n    }, this);\n  };\n\n  /**\n   * finds child elements\n   * @param {NodeList, Array, Element, or String} elems\n   * @returns {Array} elems\n   */\n  proto._find = function (elems) {\n    if (!elems) {\n      return;\n    }\n    // if string, use argument as selector string\n    if (typeof elems == 'string') {\n      elems = this.element.querySelectorAll(elems);\n    }\n    elems = utils.makeArray(elems);\n    return elems;\n  };\n\n  proto._manageStamps = function () {\n    if (!this.stamps || !this.stamps.length) {\n      return;\n    }\n\n    this._getBoundingRect();\n\n    this.stamps.forEach(this._manageStamp, this);\n  };\n\n  // update boundingLeft / Top\n  proto._getBoundingRect = function () {\n    // get bounding rect for container element\n    var boundingRect = this.element.getBoundingClientRect();\n    var size = this.size;\n    this._boundingRect = {\n      left: boundingRect.left + size.paddingLeft + size.borderLeftWidth,\n      top: boundingRect.top + size.paddingTop + size.borderTopWidth,\n      right: boundingRect.right - (size.paddingRight + size.borderRightWidth),\n      bottom: boundingRect.bottom - (size.paddingBottom + size.borderBottomWidth)\n    };\n  };\n\n  /**\n   * @param {Element} stamp\n  **/\n  proto._manageStamp = noop;\n\n  /**\n   * get x/y position of element relative to container element\n   * @param {Element} elem\n   * @returns {Object} offset - has left, top, right, bottom\n   */\n  proto._getElementOffset = function (elem) {\n    var boundingRect = elem.getBoundingClientRect();\n    var thisRect = this._boundingRect;\n    var size = getSize(elem);\n    var offset = {\n      left: boundingRect.left - thisRect.left - size.marginLeft,\n      top: boundingRect.top - thisRect.top - size.marginTop,\n      right: thisRect.right - boundingRect.right - size.marginRight,\n      bottom: thisRect.bottom - boundingRect.bottom - size.marginBottom\n    };\n    return offset;\n  };\n\n  // -------------------------- resize -------------------------- //\n\n  // enable event handlers for listeners\n  // i.e. resize -> onresize\n  proto.handleEvent = utils.handleEvent;\n\n  /**\n   * Bind layout to window resizing\n   */\n  proto.bindResize = function () {\n    window.addEventListener('resize', this);\n    this.isResizeBound = true;\n  };\n\n  /**\n   * Unbind layout to window resizing\n   */\n  proto.unbindResize = function () {\n    window.removeEventListener('resize', this);\n    this.isResizeBound = false;\n  };\n\n  proto.onresize = function () {\n    this.resize();\n  };\n\n  utils.debounceMethod(Outlayer, 'onresize', 100);\n\n  proto.resize = function () {\n    // don't trigger if size did not change\n    // or if resize was unbound. See #9\n    if (!this.isResizeBound || !this.needsResizeLayout()) {\n      return;\n    }\n\n    this.layout();\n  };\n\n  /**\n   * check if layout is needed post layout\n   * @returns Boolean\n   */\n  proto.needsResizeLayout = function () {\n    var size = getSize(this.element);\n    // check that this.size and size are there\n    // IE8 triggers resize on body size change, so they might not be\n    var hasSizes = this.size && size;\n    return hasSizes && size.innerWidth !== this.size.innerWidth;\n  };\n\n  // -------------------------- methods -------------------------- //\n\n  /**\n   * add items to Outlayer instance\n   * @param {Array or NodeList or Element} elems\n   * @returns {Array} items - Outlayer.Items\n  **/\n  proto.addItems = function (elems) {\n    var items = this._itemize(elems);\n    // add items to collection\n    if (items.length) {\n      this.items = this.items.concat(items);\n    }\n    return items;\n  };\n\n  /**\n   * Layout newly-appended item elements\n   * @param {Array or NodeList or Element} elems\n   */\n  proto.appended = function (elems) {\n    var items = this.addItems(elems);\n    if (!items.length) {\n      return;\n    }\n    // layout and reveal just the new items\n    this.layoutItems(items, true);\n    this.reveal(items);\n  };\n\n  /**\n   * Layout prepended elements\n   * @param {Array or NodeList or Element} elems\n   */\n  proto.prepended = function (elems) {\n    var items = this._itemize(elems);\n    if (!items.length) {\n      return;\n    }\n    // add items to beginning of collection\n    var previousItems = this.items.slice(0);\n    this.items = items.concat(previousItems);\n    // start new layout\n    this._resetLayout();\n    this._manageStamps();\n    // layout new stuff without transition\n    this.layoutItems(items, true);\n    this.reveal(items);\n    // layout previous items\n    this.layoutItems(previousItems);\n  };\n\n  /**\n   * reveal a collection of items\n   * @param {Array of Outlayer.Items} items\n   */\n  proto.reveal = function (items) {\n    this._emitCompleteOnItems('reveal', items);\n    if (!items || !items.length) {\n      return;\n    }\n    var stagger = this.updateStagger();\n    items.forEach(function (item, i) {\n      item.stagger(i * stagger);\n      item.reveal();\n    });\n  };\n\n  /**\n   * hide a collection of items\n   * @param {Array of Outlayer.Items} items\n   */\n  proto.hide = function (items) {\n    this._emitCompleteOnItems('hide', items);\n    if (!items || !items.length) {\n      return;\n    }\n    var stagger = this.updateStagger();\n    items.forEach(function (item, i) {\n      item.stagger(i * stagger);\n      item.hide();\n    });\n  };\n\n  /**\n   * reveal item elements\n   * @param {Array}, {Element}, {NodeList} items\n   */\n  proto.revealItemElements = function (elems) {\n    var items = this.getItems(elems);\n    this.reveal(items);\n  };\n\n  /**\n   * hide item elements\n   * @param {Array}, {Element}, {NodeList} items\n   */\n  proto.hideItemElements = function (elems) {\n    var items = this.getItems(elems);\n    this.hide(items);\n  };\n\n  /**\n   * get Outlayer.Item, given an Element\n   * @param {Element} elem\n   * @param {Function} callback\n   * @returns {Outlayer.Item} item\n   */\n  proto.getItem = function (elem) {\n    // loop through items to get the one that matches\n    for (var i = 0; i < this.items.length; i++) {\n      var item = this.items[i];\n      if (item.element == elem) {\n        // return item\n        return item;\n      }\n    }\n  };\n\n  /**\n   * get collection of Outlayer.Items, given Elements\n   * @param {Array} elems\n   * @returns {Array} items - Outlayer.Items\n   */\n  proto.getItems = function (elems) {\n    elems = utils.makeArray(elems);\n    var items = [];\n    elems.forEach(function (elem) {\n      var item = this.getItem(elem);\n      if (item) {\n        items.push(item);\n      }\n    }, this);\n\n    return items;\n  };\n\n  /**\n   * remove element(s) from instance and DOM\n   * @param {Array or NodeList or Element} elems\n   */\n  proto.remove = function (elems) {\n    var removeItems = this.getItems(elems);\n\n    this._emitCompleteOnItems('remove', removeItems);\n\n    // bail if no items to remove\n    if (!removeItems || !removeItems.length) {\n      return;\n    }\n\n    removeItems.forEach(function (item) {\n      item.remove();\n      // remove item from collection\n      utils.removeFrom(this.items, item);\n    }, this);\n  };\n\n  // ----- destroy ----- //\n\n  // remove and disable Outlayer instance\n  proto.destroy = function () {\n    // clean up dynamic styles\n    var style = this.element.style;\n    style.height = '';\n    style.position = '';\n    style.width = '';\n    // destroy items\n    this.items.forEach(function (item) {\n      item.destroy();\n    });\n\n    this.unbindResize();\n\n    var id = this.element.outlayerGUID;\n    delete instances[id]; // remove reference to instance by id\n    delete this.element.outlayerGUID;\n    // remove data for jQuery\n    if (jQuery) {\n      jQuery.removeData(this.element, this.constructor.namespace);\n    }\n\n  };\n\n  // -------------------------- data -------------------------- //\n\n  /**\n   * get Outlayer instance from element\n   * @param {Element} elem\n   * @returns {Outlayer}\n   */\n  Outlayer.data = function (elem) {\n    elem = utils.getQueryElement(elem);\n    var id = elem && elem.outlayerGUID;\n    return id && instances[id];\n  };\n\n\n  // -------------------------- create Outlayer class -------------------------- //\n\n  /**\n   * create a layout class\n   * @param {String} namespace\n   */\n  Outlayer.create = function (namespace, options) {\n    // sub-class Outlayer\n    var Layout = subclass(Outlayer);\n    // apply new options and compatOptions\n    Layout.defaults = utils.extend({}, Outlayer.defaults);\n    utils.extend(Layout.defaults, options);\n    Layout.compatOptions = utils.extend({}, Outlayer.compatOptions);\n\n    Layout.namespace = namespace;\n\n    Layout.data = Outlayer.data;\n\n    // sub-class Item\n    Layout.Item = subclass(Item);\n\n    // -------------------------- declarative -------------------------- //\n\n    utils.htmlInit(Layout, namespace);\n\n    // -------------------------- jQuery bridge -------------------------- //\n\n    // make into jQuery plugin\n    if (jQuery && jQuery.bridget) {\n      jQuery.bridget(namespace, Layout);\n    }\n\n    return Layout;\n  };\n\n  function subclass(Parent) {\n    function SubClass() {\n      Parent.apply(this, arguments);\n    }\n\n    SubClass.prototype = Object.create(Parent.prototype);\n    SubClass.prototype.constructor = SubClass;\n\n    return SubClass;\n  }\n\n  // ----- helpers ----- //\n\n  // how many milliseconds are in each unit\n  var msUnits = {\n    ms: 1,\n    s: 1000\n  };\n\n  // munge time-like parameter into millisecond number\n  // '0.4s' -> 40\n  function getMilliseconds(time) {\n    if (typeof time == 'number') {\n      return time;\n    }\n    var matches = time.match(/(^\\d*\\.?\\d*)(\\w*)/);\n    var num = matches && matches[1];\n    var unit = matches && matches[2];\n    if (!num.length) {\n      return 0;\n    }\n    num = parseFloat(num);\n    var mult = msUnits[unit] || 1;\n    return num * mult;\n  }\n\n  // ----- fin ----- //\n\n  // back in global\n  Outlayer.Item = Item;\n\n  return Outlayer;\n\n}));\n\n/**\n * Isotope Item\n**/\n\n(function (window, factory) {\n  // universal module definition\n  /* jshint strict: false */ /*globals define, module, require */\n  if (typeof define == 'function' && define.amd) {\n    // AMD\n    define('isotope-layout/js/item', [\n      'outlayer/outlayer'\n    ],\n      factory);\n  } else if (typeof module == 'object' && module.exports) {\n    // CommonJS\n    module.exports = factory(\n      require('outlayer')\n    );\n  } else {\n    // browser global\n    window.Isotope = window.Isotope || {};\n    window.Isotope.Item = factory(\n      window.Outlayer\n    );\n  }\n\n}(window, function factory(Outlayer) {\n  'use strict';\n\n  // -------------------------- Item -------------------------- //\n\n  // sub-class Outlayer Item\n  function Item() {\n    Outlayer.Item.apply(this, arguments);\n  }\n\n  var proto = Item.prototype = Object.create(Outlayer.Item.prototype);\n\n  var _create = proto._create;\n  proto._create = function () {\n    // assign id, used for original-order sorting\n    this.id = this.layout.itemGUID++;\n    _create.call(this);\n    this.sortData = {};\n  };\n\n  proto.updateSortData = function () {\n    if (this.isIgnored) {\n      return;\n    }\n    // default sorters\n    this.sortData.id = this.id;\n    // for backward compatibility\n    this.sortData['original-order'] = this.id;\n    this.sortData.random = Math.random();\n    // go thru getSortData obj and apply the sorters\n    var getSortData = this.layout.options.getSortData;\n    var sorters = this.layout._sorters;\n    for (var key in getSortData) {\n      var sorter = sorters[key];\n      this.sortData[key] = sorter(this.element, this);\n    }\n  };\n\n  var _destroy = proto.destroy;\n  proto.destroy = function () {\n    // call super\n    _destroy.apply(this, arguments);\n    // reset display, #741\n    this.css({\n      display: ''\n    });\n  };\n\n  return Item;\n\n}));\n\n/**\n * Isotope LayoutMode\n */\n\n(function (window, factory) {\n  // universal module definition\n  /* jshint strict: false */ /*globals define, module, require */\n  if (typeof define == 'function' && define.amd) {\n    // AMD\n    define('isotope-layout/js/layout-mode', [\n      'get-size/get-size',\n      'outlayer/outlayer'\n    ],\n      factory);\n  } else if (typeof module == 'object' && module.exports) {\n    // CommonJS\n    module.exports = factory(\n      require('get-size'),\n      require('outlayer')\n    );\n  } else {\n    // browser global\n    window.Isotope = window.Isotope || {};\n    window.Isotope.LayoutMode = factory(\n      window.getSize,\n      window.Outlayer\n    );\n  }\n\n}(window, function factory(getSize, Outlayer) {\n  'use strict';\n\n  // layout mode class\n  function LayoutMode(isotope) {\n    this.isotope = isotope;\n    // link properties\n    if (isotope) {\n      this.options = isotope.options[this.namespace];\n      this.element = isotope.element;\n      this.items = isotope.filteredItems;\n      this.size = isotope.size;\n    }\n  }\n\n  var proto = LayoutMode.prototype;\n\n  /**\n   * some methods should just defer to default Outlayer method\n   * and reference the Isotope instance as `this`\n  **/\n  var facadeMethods = [\n    '_resetLayout',\n    '_getItemLayoutPosition',\n    '_manageStamp',\n    '_getContainerSize',\n    '_getElementOffset',\n    'needsResizeLayout',\n    '_getOption'\n  ];\n\n  facadeMethods.forEach(function (methodName) {\n    proto[methodName] = function () {\n      return Outlayer.prototype[methodName].apply(this.isotope, arguments);\n    };\n  });\n\n  // -----  ----- //\n\n  // for horizontal layout modes, check vertical size\n  proto.needsVerticalResizeLayout = function () {\n    // don't trigger if size did not change\n    var size = getSize(this.isotope.element);\n    // check that this.size and size are there\n    // IE8 triggers resize on body size change, so they might not be\n    var hasSizes = this.isotope.size && size;\n    return hasSizes && size.innerHeight != this.isotope.size.innerHeight;\n  };\n\n  // ----- measurements ----- //\n\n  proto._getMeasurement = function () {\n    this.isotope._getMeasurement.apply(this, arguments);\n  };\n\n  proto.getColumnWidth = function () {\n    this.getSegmentSize('column', 'Width');\n  };\n\n  proto.getRowHeight = function () {\n    this.getSegmentSize('row', 'Height');\n  };\n\n  /**\n   * get columnWidth or rowHeight\n   * segment: 'column' or 'row'\n   * size 'Width' or 'Height'\n  **/\n  proto.getSegmentSize = function (segment, size) {\n    var segmentName = segment + size;\n    var outerSize = 'outer' + size;\n    // columnWidth / outerWidth // rowHeight / outerHeight\n    this._getMeasurement(segmentName, outerSize);\n    // got rowHeight or columnWidth, we can chill\n    if (this[segmentName]) {\n      return;\n    }\n    // fall back to item of first element\n    var firstItemSize = this.getFirstItemSize();\n    this[segmentName] = firstItemSize && firstItemSize[outerSize] ||\n      // or size of container\n      this.isotope.size['inner' + size];\n  };\n\n  proto.getFirstItemSize = function () {\n    var firstItem = this.isotope.filteredItems[0];\n    return firstItem && firstItem.element && getSize(firstItem.element);\n  };\n\n  // ----- methods that should reference isotope ----- //\n\n  proto.layout = function () {\n    this.isotope.layout.apply(this.isotope, arguments);\n  };\n\n  proto.getSize = function () {\n    this.isotope.getSize();\n    this.size = this.isotope.size;\n  };\n\n  // -------------------------- create -------------------------- //\n\n  LayoutMode.modes = {};\n\n  LayoutMode.create = function (namespace, options) {\n\n    function Mode() {\n      LayoutMode.apply(this, arguments);\n    }\n\n    Mode.prototype = Object.create(proto);\n    Mode.prototype.constructor = Mode;\n\n    // default options\n    if (options) {\n      Mode.options = options;\n    }\n\n    Mode.prototype.namespace = namespace;\n    // register in Isotope\n    LayoutMode.modes[namespace] = Mode;\n\n    return Mode;\n  };\n\n  return LayoutMode;\n\n}));\n\n/*!\n * Masonry v4.2.1\n * Cascading grid layout library\n * https://masonry.desandro.com\n * MIT License\n * by David DeSandro\n */\n\n(function (window, factory) {\n  // universal module definition\n  /* jshint strict: false */ /*globals define, module, require */\n  if (typeof define == 'function' && define.amd) {\n    // AMD\n    define('masonry-layout/masonry', [\n      'outlayer/outlayer',\n      'get-size/get-size'\n    ],\n      factory);\n  } else if (typeof module == 'object' && module.exports) {\n    // CommonJS\n    module.exports = factory(\n      require('outlayer'),\n      require('get-size')\n    );\n  } else {\n    // browser global\n    window.Masonry = factory(\n      window.Outlayer,\n      window.getSize\n    );\n  }\n\n}(window, function factory(Outlayer, getSize) {\n\n\n\n  // -------------------------- masonryDefinition -------------------------- //\n\n  // create an Outlayer layout class\n  var Masonry = Outlayer.create('masonry');\n  // isFitWidth -> fitWidth\n  Masonry.compatOptions.fitWidth = 'isFitWidth';\n\n  var proto = Masonry.prototype;\n\n  proto._resetLayout = function () {\n    this.getSize();\n    this._getMeasurement('columnWidth', 'outerWidth');\n    this._getMeasurement('gutter', 'outerWidth');\n    this.measureColumns();\n\n    // reset column Y\n    this.colYs = [];\n    for (var i = 0; i < this.cols; i++) {\n      this.colYs.push(0);\n    }\n\n    this.maxY = 0;\n    this.horizontalColIndex = 0;\n  };\n\n  proto.measureColumns = function () {\n    this.getContainerWidth();\n    // if columnWidth is 0, default to outerWidth of first item\n    if (!this.columnWidth) {\n      var firstItem = this.items[0];\n      var firstItemElem = firstItem && firstItem.element;\n      // columnWidth fall back to item of first element\n      this.columnWidth = firstItemElem && getSize(firstItemElem).outerWidth ||\n        // if first elem has no width, default to size of container\n        this.containerWidth;\n    }\n\n    var columnWidth = this.columnWidth += this.gutter;\n\n    // calculate columns\n    var containerWidth = this.containerWidth + this.gutter;\n    var cols = containerWidth / columnWidth;\n    // fix rounding errors, typically with gutters\n    var excess = columnWidth - containerWidth % columnWidth;\n    // if overshoot is less than a pixel, round up, otherwise floor it\n    var mathMethod = excess && excess < 1 ? 'round' : 'floor';\n    cols = Math[mathMethod](cols);\n    this.cols = Math.max(cols, 1);\n  };\n\n  proto.getContainerWidth = function () {\n    // container is parent if fit width\n    var isFitWidth = this._getOption('fitWidth');\n    var container = isFitWidth ? this.element.parentNode : this.element;\n    // check that this.size and size are there\n    // IE8 triggers resize on body size change, so they might not be\n    var size = getSize(container);\n    this.containerWidth = size && size.innerWidth;\n  };\n\n  proto._getItemLayoutPosition = function (item) {\n    item.getSize();\n    // how many columns does this brick span\n    var remainder = item.size.outerWidth % this.columnWidth;\n    var mathMethod = remainder && remainder < 1 ? 'round' : 'ceil';\n    // round if off by 1 pixel, otherwise use ceil\n    var colSpan = Math[mathMethod](item.size.outerWidth / this.columnWidth);\n    colSpan = Math.min(colSpan, this.cols);\n    // use horizontal or top column position\n    var colPosMethod = this.options.horizontalOrder ?\n      '_getHorizontalColPosition' : '_getTopColPosition';\n    var colPosition = this[colPosMethod](colSpan, item);\n    // position the brick\n    var position = {\n      x: this.columnWidth * colPosition.col,\n      y: colPosition.y\n    };\n    // apply setHeight to necessary columns\n    var setHeight = colPosition.y + item.size.outerHeight;\n    var setMax = colSpan + colPosition.col;\n    for (var i = colPosition.col; i < setMax; i++) {\n      this.colYs[i] = setHeight;\n    }\n\n    return position;\n  };\n\n  proto._getTopColPosition = function (colSpan) {\n    var colGroup = this._getTopColGroup(colSpan);\n    // get the minimum Y value from the columns\n    var minimumY = Math.min.apply(Math, colGroup);\n\n    return {\n      col: colGroup.indexOf(minimumY),\n      y: minimumY,\n    };\n  };\n\n  /**\n   * @param {Number} colSpan - number of columns the element spans\n   * @returns {Array} colGroup\n   */\n  proto._getTopColGroup = function (colSpan) {\n    if (colSpan < 2) {\n      // if brick spans only one column, use all the column Ys\n      return this.colYs;\n    }\n\n    var colGroup = [];\n    // how many different places could this brick fit horizontally\n    var groupCount = this.cols + 1 - colSpan;\n    // for each group potential horizontal position\n    for (var i = 0; i < groupCount; i++) {\n      colGroup[i] = this._getColGroupY(i, colSpan);\n    }\n    return colGroup;\n  };\n\n  proto._getColGroupY = function (col, colSpan) {\n    if (colSpan < 2) {\n      return this.colYs[col];\n    }\n    // make an array of colY values for that one group\n    var groupColYs = this.colYs.slice(col, col + colSpan);\n    // and get the max value of the array\n    return Math.max.apply(Math, groupColYs);\n  };\n\n  // get column position based on horizontal index. #873\n  proto._getHorizontalColPosition = function (colSpan, item) {\n    var col = this.horizontalColIndex % this.cols;\n    var isOver = colSpan > 1 && col + colSpan > this.cols;\n    // shift to next row if item can't fit on current row\n    col = isOver ? 0 : col;\n    // don't let zero-size items take up space\n    var hasSize = item.size.outerWidth && item.size.outerHeight;\n    this.horizontalColIndex = hasSize ? col + colSpan : this.horizontalColIndex;\n\n    return {\n      col: col,\n      y: this._getColGroupY(col, colSpan),\n    };\n  };\n\n  proto._manageStamp = function (stamp) {\n    var stampSize = getSize(stamp);\n    var offset = this._getElementOffset(stamp);\n    // get the columns that this stamp affects\n    var isOriginLeft = this._getOption('originLeft');\n    var firstX = isOriginLeft ? offset.left : offset.right;\n    var lastX = firstX + stampSize.outerWidth;\n    var firstCol = Math.floor(firstX / this.columnWidth);\n    firstCol = Math.max(0, firstCol);\n    var lastCol = Math.floor(lastX / this.columnWidth);\n    // lastCol should not go over if multiple of columnWidth #425\n    lastCol -= lastX % this.columnWidth ? 0 : 1;\n    lastCol = Math.min(this.cols - 1, lastCol);\n    // set colYs to bottom of the stamp\n\n    var isOriginTop = this._getOption('originTop');\n    var stampMaxY = (isOriginTop ? offset.top : offset.bottom) +\n      stampSize.outerHeight;\n    for (var i = firstCol; i <= lastCol; i++) {\n      this.colYs[i] = Math.max(stampMaxY, this.colYs[i]);\n    }\n  };\n\n  proto._getContainerSize = function () {\n    this.maxY = Math.max.apply(Math, this.colYs);\n    var size = {\n      height: this.maxY\n    };\n\n    if (this._getOption('fitWidth')) {\n      size.width = this._getContainerFitWidth();\n    }\n\n    return size;\n  };\n\n  proto._getContainerFitWidth = function () {\n    var unusedCols = 0;\n    // count unused columns\n    var i = this.cols;\n    while (--i) {\n      if (this.colYs[i] !== 0) {\n        break;\n      }\n      unusedCols++;\n    }\n    // fit container to columns that have been used\n    return (this.cols - unusedCols) * this.columnWidth - this.gutter;\n  };\n\n  proto.needsResizeLayout = function () {\n    var previousWidth = this.containerWidth;\n    this.getContainerWidth();\n    return previousWidth != this.containerWidth;\n  };\n\n  return Masonry;\n\n}));\n\n/*!\n * Masonry layout mode\n * sub-classes Masonry\n * https://masonry.desandro.com\n */\n\n(function (window, factory) {\n  // universal module definition\n  /* jshint strict: false */ /*globals define, module, require */\n  if (typeof define == 'function' && define.amd) {\n    // AMD\n    define('isotope-layout/js/layout-modes/masonry', [\n      '../layout-mode',\n      'masonry-layout/masonry'\n    ],\n      factory);\n  } else if (typeof module == 'object' && module.exports) {\n    // CommonJS\n    module.exports = factory(\n      require('../layout-mode'),\n      require('masonry-layout')\n    );\n  } else {\n    // browser global\n    factory(\n      window.Isotope.LayoutMode,\n      window.Masonry\n    );\n  }\n\n}(window, function factory(LayoutMode, Masonry) {\n  'use strict';\n\n  // -------------------------- masonryDefinition -------------------------- //\n\n  // create an Outlayer layout class\n  var MasonryMode = LayoutMode.create('masonry');\n\n  var proto = MasonryMode.prototype;\n\n  var keepModeMethods = {\n    _getElementOffset: true,\n    layout: true,\n    _getMeasurement: true\n  };\n\n  // inherit Masonry prototype\n  for (var method in Masonry.prototype) {\n    // do not inherit mode methods\n    if (!keepModeMethods[method]) {\n      proto[method] = Masonry.prototype[method];\n    }\n  }\n\n  var measureColumns = proto.measureColumns;\n  proto.measureColumns = function () {\n    // set items, used if measuring first item\n    this.items = this.isotope.filteredItems;\n    measureColumns.call(this);\n  };\n\n  // point to mode options for fitWidth\n  var _getOption = proto._getOption;\n  proto._getOption = function (option) {\n    if (option == 'fitWidth') {\n      return this.options.isFitWidth !== undefined ?\n        this.options.isFitWidth : this.options.fitWidth;\n    }\n    return _getOption.apply(this.isotope, arguments);\n  };\n\n  return MasonryMode;\n\n}));\n\n/**\n * fitRows layout mode\n */\n\n(function (window, factory) {\n  // universal module definition\n  /* jshint strict: false */ /*globals define, module, require */\n  if (typeof define == 'function' && define.amd) {\n    // AMD\n    define('isotope-layout/js/layout-modes/fit-rows', [\n      '../layout-mode'\n    ],\n      factory);\n  } else if (typeof exports == 'object') {\n    // CommonJS\n    module.exports = factory(\n      require('../layout-mode')\n    );\n  } else {\n    // browser global\n    factory(\n      window.Isotope.LayoutMode\n    );\n  }\n\n}(window, function factory(LayoutMode) {\n  'use strict';\n\n  var FitRows = LayoutMode.create('fitRows');\n\n  var proto = FitRows.prototype;\n\n  proto._resetLayout = function () {\n    this.x = 0;\n    this.y = 0;\n    this.maxY = 0;\n    this._getMeasurement('gutter', 'outerWidth');\n  };\n\n  proto._getItemLayoutPosition = function (item) {\n    item.getSize();\n\n    var itemWidth = item.size.outerWidth + this.gutter;\n    // if this element cannot fit in the current row\n    var containerWidth = this.isotope.size.innerWidth + this.gutter;\n    if (this.x !== 0 && itemWidth + this.x > containerWidth) {\n      this.x = 0;\n      this.y = this.maxY;\n    }\n\n    var position = {\n      x: this.x,\n      y: this.y\n    };\n\n    this.maxY = Math.max(this.maxY, this.y + item.size.outerHeight);\n    this.x += itemWidth;\n\n    return position;\n  };\n\n  proto._getContainerSize = function () {\n    return { height: this.maxY };\n  };\n\n  return FitRows;\n\n}));\n\n/**\n * vertical layout mode\n */\n\n(function (window, factory) {\n  // universal module definition\n  /* jshint strict: false */ /*globals define, module, require */\n  if (typeof define == 'function' && define.amd) {\n    // AMD\n    define('isotope-layout/js/layout-modes/vertical', [\n      '../layout-mode'\n    ],\n      factory);\n  } else if (typeof module == 'object' && module.exports) {\n    // CommonJS\n    module.exports = factory(\n      require('../layout-mode')\n    );\n  } else {\n    // browser global\n    factory(\n      window.Isotope.LayoutMode\n    );\n  }\n\n}(window, function factory(LayoutMode) {\n  'use strict';\n\n  var Vertical = LayoutMode.create('vertical', {\n    horizontalAlignment: 0\n  });\n\n  var proto = Vertical.prototype;\n\n  proto._resetLayout = function () {\n    this.y = 0;\n  };\n\n  proto._getItemLayoutPosition = function (item) {\n    item.getSize();\n    var x = (this.isotope.size.innerWidth - item.size.outerWidth) *\n      this.options.horizontalAlignment;\n    var y = this.y;\n    this.y += item.size.outerHeight;\n    return { x: x, y: y };\n  };\n\n  proto._getContainerSize = function () {\n    return { height: this.y };\n  };\n\n  return Vertical;\n\n}));\n\n/*!\n * Isotope v3.0.6\n *\n * Licensed GPLv3 for open source use\n * or Isotope Commercial License for commercial use\n *\n * https://isotope.metafizzy.co\n * Copyright 2010-2018 Metafizzy\n */\n\n(function (window, factory) {\n  // universal module definition\n  /* jshint strict: false */ /*globals define, module, require */\n  if (typeof define == 'function' && define.amd) {\n    // AMD\n    define([\n      'outlayer/outlayer',\n      'get-size/get-size',\n      'desandro-matches-selector/matches-selector',\n      'fizzy-ui-utils/utils',\n      'isotope-layout/js/item',\n      'isotope-layout/js/layout-mode',\n      // include default layout modes\n      'isotope-layout/js/layout-modes/masonry',\n      'isotope-layout/js/layout-modes/fit-rows',\n      'isotope-layout/js/layout-modes/vertical'\n    ],\n      function (Outlayer, getSize, matchesSelector, utils, Item, LayoutMode) {\n        return factory(window, Outlayer, getSize, matchesSelector, utils, Item, LayoutMode);\n      });\n  } else if (typeof module == 'object' && module.exports) {\n    // CommonJS\n    module.exports = factory(\n      window,\n      require('outlayer'),\n      require('get-size'),\n      require('desandro-matches-selector'),\n      require('fizzy-ui-utils'),\n      require('isotope-layout/js/item'),\n      require('isotope-layout/js/layout-mode'),\n      // include default layout modes\n      require('isotope-layout/js/layout-modes/masonry'),\n      require('isotope-layout/js/layout-modes/fit-rows'),\n      require('isotope-layout/js/layout-modes/vertical')\n    );\n  } else {\n    // browser global\n    window.Isotope = factory(\n      window,\n      window.Outlayer,\n      window.getSize,\n      window.matchesSelector,\n      window.fizzyUIUtils,\n      window.Isotope.Item,\n      window.Isotope.LayoutMode\n    );\n  }\n\n}(window, function factory(window, Outlayer, getSize, matchesSelector, utils,\n  Item, LayoutMode) {\n\n\n\n  // -------------------------- vars -------------------------- //\n\n  var jQuery = window.jQuery;\n\n  // -------------------------- helpers -------------------------- //\n\n  var trim = String.prototype.trim ?\n    function (str) {\n      return str.trim();\n    } :\n    function (str) {\n      return str.replace(/^\\s+|\\s+$/g, '');\n    };\n\n  // -------------------------- isotopeDefinition -------------------------- //\n\n  // create an Outlayer layout class\n  var Isotope = Outlayer.create('isotope', {\n    layoutMode: 'masonry',\n    isJQueryFiltering: true,\n    sortAscending: true\n  });\n\n  Isotope.Item = Item;\n  Isotope.LayoutMode = LayoutMode;\n\n  var proto = Isotope.prototype;\n\n  proto._create = function () {\n    this.itemGUID = 0;\n    // functions that sort items\n    this._sorters = {};\n    this._getSorters();\n    // call super\n    Outlayer.prototype._create.call(this);\n\n    // create layout modes\n    this.modes = {};\n    // start filteredItems with all items\n    this.filteredItems = this.items;\n    // keep of track of sortBys\n    this.sortHistory = ['original-order'];\n    // create from registered layout modes\n    for (var name in LayoutMode.modes) {\n      this._initLayoutMode(name);\n    }\n  };\n\n  proto.reloadItems = function () {\n    // reset item ID counter\n    this.itemGUID = 0;\n    // call super\n    Outlayer.prototype.reloadItems.call(this);\n  };\n\n  proto._itemize = function () {\n    var items = Outlayer.prototype._itemize.apply(this, arguments);\n    // assign ID for original-order\n    for (var i = 0; i < items.length; i++) {\n      var item = items[i];\n      item.id = this.itemGUID++;\n    }\n    this._updateItemsSortData(items);\n    return items;\n  };\n\n\n  // -------------------------- layout -------------------------- //\n\n  proto._initLayoutMode = function (name) {\n    var Mode = LayoutMode.modes[name];\n    // set mode options\n    // HACK extend initial options, back-fill in default options\n    var initialOpts = this.options[name] || {};\n    this.options[name] = Mode.options ?\n      utils.extend(Mode.options, initialOpts) : initialOpts;\n    // init layout mode instance\n    this.modes[name] = new Mode(this);\n  };\n\n\n  proto.layout = function () {\n    // if first time doing layout, do all magic\n    if (!this._isLayoutInited && this._getOption('initLayout')) {\n      this.arrange();\n      return;\n    }\n    this._layout();\n  };\n\n  // private method to be used in layout() & magic()\n  proto._layout = function () {\n    // don't animate first layout\n    var isInstant = this._getIsInstant();\n    // layout flow\n    this._resetLayout();\n    this._manageStamps();\n    this.layoutItems(this.filteredItems, isInstant);\n\n    // flag for initalized\n    this._isLayoutInited = true;\n  };\n\n  // filter + sort + layout\n  proto.arrange = function (opts) {\n    // set any options pass\n    this.option(opts);\n    this._getIsInstant();\n    // filter, sort, and layout\n\n    // filter\n    var filtered = this._filter(this.items);\n    this.filteredItems = filtered.matches;\n\n    this._bindArrangeComplete();\n\n    if (this._isInstant) {\n      this._noTransition(this._hideReveal, [filtered]);\n    } else {\n      this._hideReveal(filtered);\n    }\n\n    this._sort();\n    this._layout();\n  };\n  // alias to _init for main plugin method\n  proto._init = proto.arrange;\n\n  proto._hideReveal = function (filtered) {\n    this.reveal(filtered.needReveal);\n    this.hide(filtered.needHide);\n  };\n\n  // HACK\n  // Don't animate/transition first layout\n  // Or don't animate/transition other layouts\n  proto._getIsInstant = function () {\n    var isLayoutInstant = this._getOption('layoutInstant');\n    var isInstant = isLayoutInstant !== undefined ? isLayoutInstant :\n      !this._isLayoutInited;\n    this._isInstant = isInstant;\n    return isInstant;\n  };\n\n  // listen for layoutComplete, hideComplete and revealComplete\n  // to trigger arrangeComplete\n  proto._bindArrangeComplete = function () {\n    // listen for 3 events to trigger arrangeComplete\n    var isLayoutComplete, isHideComplete, isRevealComplete;\n    var _this = this;\n    function arrangeParallelCallback() {\n      if (isLayoutComplete && isHideComplete && isRevealComplete) {\n        _this.dispatchEvent('arrangeComplete', null, [_this.filteredItems]);\n      }\n    }\n    this.once('layoutComplete', function () {\n      isLayoutComplete = true;\n      arrangeParallelCallback();\n    });\n    this.once('hideComplete', function () {\n      isHideComplete = true;\n      arrangeParallelCallback();\n    });\n    this.once('revealComplete', function () {\n      isRevealComplete = true;\n      arrangeParallelCallback();\n    });\n  };\n\n  // -------------------------- filter -------------------------- //\n\n  proto._filter = function (items) {\n    var filter = this.options.filter;\n    filter = filter || '*';\n    var matches = [];\n    var hiddenMatched = [];\n    var visibleUnmatched = [];\n\n    var test = this._getFilterTest(filter);\n\n    // test each item\n    for (var i = 0; i < items.length; i++) {\n      var item = items[i];\n      if (item.isIgnored) {\n        continue;\n      }\n      // add item to either matched or unmatched group\n      var isMatched = test(item);\n      // item.isFilterMatched = isMatched;\n      // add to matches if its a match\n      if (isMatched) {\n        matches.push(item);\n      }\n      // add to additional group if item needs to be hidden or revealed\n      if (isMatched && item.isHidden) {\n        hiddenMatched.push(item);\n      } else if (!isMatched && !item.isHidden) {\n        visibleUnmatched.push(item);\n      }\n    }\n\n    // return collections of items to be manipulated\n    return {\n      matches: matches,\n      needReveal: hiddenMatched,\n      needHide: visibleUnmatched\n    };\n  };\n\n  // get a jQuery, function, or a matchesSelector test given the filter\n  proto._getFilterTest = function (filter) {\n    if (jQuery && this.options.isJQueryFiltering) {\n      // use jQuery\n      return function (item) {\n        return jQuery(item.element).is(filter);\n      };\n    }\n    if (typeof filter == 'function') {\n      // use filter as function\n      return function (item) {\n        return filter(item.element);\n      };\n    }\n    // default, use filter as selector string\n    return function (item) {\n      return matchesSelector(item.element, filter);\n    };\n  };\n\n  // -------------------------- sorting -------------------------- //\n\n  /**\n   * @params {Array} elems\n   * @public\n   */\n  proto.updateSortData = function (elems) {\n    // get items\n    var items;\n    if (elems) {\n      elems = utils.makeArray(elems);\n      items = this.getItems(elems);\n    } else {\n      // update all items if no elems provided\n      items = this.items;\n    }\n\n    this._getSorters();\n    this._updateItemsSortData(items);\n  };\n\n  proto._getSorters = function () {\n    var getSortData = this.options.getSortData;\n    for (var key in getSortData) {\n      var sorter = getSortData[key];\n      this._sorters[key] = mungeSorter(sorter);\n    }\n  };\n\n  /**\n   * @params {Array} items - of Isotope.Items\n   * @private\n   */\n  proto._updateItemsSortData = function (items) {\n    // do not update if no items\n    var len = items && items.length;\n\n    for (var i = 0; len && i < len; i++) {\n      var item = items[i];\n      item.updateSortData();\n    }\n  };\n\n  // ----- munge sorter ----- //\n\n  // encapsulate this, as we just need mungeSorter\n  // other functions in here are just for munging\n  var mungeSorter = (function () {\n    // add a magic layer to sorters for convienent shorthands\n    // `.foo-bar` will use the text of .foo-bar querySelector\n    // `[foo-bar]` will use attribute\n    // you can also add parser\n    // `.foo-bar parseInt` will parse that as a number\n    function mungeSorter(sorter) {\n      // if not a string, return function or whatever it is\n      if (typeof sorter != 'string') {\n        return sorter;\n      }\n      // parse the sorter string\n      var args = trim(sorter).split(' ');\n      var query = args[0];\n      // check if query looks like [an-attribute]\n      var attrMatch = query.match(/^\\[(.+)\\]$/);\n      var attr = attrMatch && attrMatch[1];\n      var getValue = getValueGetter(attr, query);\n      // use second argument as a parser\n      var parser = Isotope.sortDataParsers[args[1]];\n      // parse the value, if there was a parser\n      sorter = parser ? function (elem) {\n        return elem && parser(getValue(elem));\n      } :\n        // otherwise just return value\n        function (elem) {\n          return elem && getValue(elem);\n        };\n\n      return sorter;\n    }\n\n    // get an attribute getter, or get text of the querySelector\n    function getValueGetter(attr, query) {\n      // if query looks like [foo-bar], get attribute\n      if (attr) {\n        return function getAttribute(elem) {\n          return elem.getAttribute(attr);\n        };\n      }\n\n      // otherwise, assume its a querySelector, and get its text\n      return function getChildText(elem) {\n        var child = elem.querySelector(query);\n        return child && child.textContent;\n      };\n    }\n\n    return mungeSorter;\n  })();\n\n  // parsers used in getSortData shortcut strings\n  Isotope.sortDataParsers = {\n    'parseInt': function (val) {\n      return parseInt(val, 10);\n    },\n    'parseFloat': function (val) {\n      return parseFloat(val);\n    }\n  };\n\n  // ----- sort method ----- //\n\n  // sort filteredItem order\n  proto._sort = function () {\n    if (!this.options.sortBy) {\n      return;\n    }\n    // keep track of sortBy History\n    var sortBys = utils.makeArray(this.options.sortBy);\n    if (!this._getIsSameSortBy(sortBys)) {\n      // concat all sortBy and sortHistory, add to front, oldest goes in last\n      this.sortHistory = sortBys.concat(this.sortHistory);\n    }\n    // sort magic\n    var itemSorter = getItemSorter(this.sortHistory, this.options.sortAscending);\n    this.filteredItems.sort(itemSorter);\n  };\n\n  // check if sortBys is same as start of sortHistory\n  proto._getIsSameSortBy = function (sortBys) {\n    for (var i = 0; i < sortBys.length; i++) {\n      if (sortBys[i] != this.sortHistory[i]) {\n        return false;\n      }\n    }\n    return true;\n  };\n\n  // returns a function used for sorting\n  function getItemSorter(sortBys, sortAsc) {\n    return function sorter(itemA, itemB) {\n      // cycle through all sortKeys\n      for (var i = 0; i < sortBys.length; i++) {\n        var sortBy = sortBys[i];\n        var a = itemA.sortData[sortBy];\n        var b = itemB.sortData[sortBy];\n        if (a > b || a < b) {\n          // if sortAsc is an object, use the value given the sortBy key\n          var isAscending = sortAsc[sortBy] !== undefined ? sortAsc[sortBy] : sortAsc;\n          var direction = isAscending ? 1 : -1;\n          return (a > b ? 1 : -1) * direction;\n        }\n      }\n      return 0;\n    };\n  }\n\n  // -------------------------- methods -------------------------- //\n\n  // get layout mode\n  proto._mode = function () {\n    var layoutMode = this.options.layoutMode;\n    var mode = this.modes[layoutMode];\n    if (!mode) {\n      // TODO console.error\n      throw new Error('No layout mode: ' + layoutMode);\n    }\n    // HACK sync mode's options\n    // any options set after init for layout mode need to be synced\n    mode.options = this.options[layoutMode];\n    return mode;\n  };\n\n  proto._resetLayout = function () {\n    // trigger original reset layout\n    Outlayer.prototype._resetLayout.call(this);\n    this._mode()._resetLayout();\n  };\n\n  proto._getItemLayoutPosition = function (item) {\n    return this._mode()._getItemLayoutPosition(item);\n  };\n\n  proto._manageStamp = function (stamp) {\n    this._mode()._manageStamp(stamp);\n  };\n\n  proto._getContainerSize = function () {\n    return this._mode()._getContainerSize();\n  };\n\n  proto.needsResizeLayout = function () {\n    return this._mode().needsResizeLayout();\n  };\n\n  // -------------------------- adding & removing -------------------------- //\n\n  // HEADS UP overwrites default Outlayer appended\n  proto.appended = function (elems) {\n    var items = this.addItems(elems);\n    if (!items.length) {\n      return;\n    }\n    // filter, layout, reveal new items\n    var filteredItems = this._filterRevealAdded(items);\n    // add to filteredItems\n    this.filteredItems = this.filteredItems.concat(filteredItems);\n  };\n\n  // HEADS UP overwrites default Outlayer prepended\n  proto.prepended = function (elems) {\n    var items = this._itemize(elems);\n    if (!items.length) {\n      return;\n    }\n    // start new layout\n    this._resetLayout();\n    this._manageStamps();\n    // filter, layout, reveal new items\n    var filteredItems = this._filterRevealAdded(items);\n    // layout previous items\n    this.layoutItems(this.filteredItems);\n    // add to items and filteredItems\n    this.filteredItems = filteredItems.concat(this.filteredItems);\n    this.items = items.concat(this.items);\n  };\n\n  proto._filterRevealAdded = function (items) {\n    var filtered = this._filter(items);\n    this.hide(filtered.needHide);\n    // reveal all new items\n    this.reveal(filtered.matches);\n    // layout new items, no transition\n    this.layoutItems(filtered.matches, true);\n    return filtered.matches;\n  };\n\n  /**\n   * Filter, sort, and layout newly-appended item elements\n   * @param {Array or NodeList or Element} elems\n   */\n  proto.insert = function (elems) {\n    var items = this.addItems(elems);\n    if (!items.length) {\n      return;\n    }\n    // append item elements\n    var i, item;\n    var len = items.length;\n    for (i = 0; i < len; i++) {\n      item = items[i];\n      this.element.appendChild(item.element);\n    }\n    // filter new stuff\n    var filteredInsertItems = this._filter(items).matches;\n    // set flag\n    for (i = 0; i < len; i++) {\n      items[i].isLayoutInstant = true;\n    }\n    this.arrange();\n    // reset flag\n    for (i = 0; i < len; i++) {\n      delete items[i].isLayoutInstant;\n    }\n    this.reveal(filteredInsertItems);\n  };\n\n  var _remove = proto.remove;\n  proto.remove = function (elems) {\n    elems = utils.makeArray(elems);\n    var removeItems = this.getItems(elems);\n    // do regular thing\n    _remove.call(this, elems);\n    // bail if no items to remove\n    var len = removeItems && removeItems.length;\n    // remove elems from filteredItems\n    for (var i = 0; len && i < len; i++) {\n      var item = removeItems[i];\n      // remove item from collection\n      utils.removeFrom(this.filteredItems, item);\n    }\n  };\n\n  proto.shuffle = function () {\n    // update random sortData\n    for (var i = 0; i < this.items.length; i++) {\n      var item = this.items[i];\n      item.sortData.random = Math.random();\n    }\n    this.options.sortBy = 'random';\n    this._sort();\n    this._layout();\n  };\n\n  /**\n   * trigger fn without transition\n   * kind of hacky to have this in the first place\n   * @param {Function} fn\n   * @param {Array} args\n   * @returns ret\n   * @private\n   */\n  proto._noTransition = function (fn, args) {\n    // save transitionDuration before disabling\n    var transitionDuration = this.options.transitionDuration;\n    // disable transition\n    this.options.transitionDuration = 0;\n    // do it\n    var returnValue = fn.apply(this, args);\n    // re-enable transition for reveal\n    this.options.transitionDuration = transitionDuration;\n    return returnValue;\n  };\n\n  // ----- helper methods ----- //\n\n  /**\n   * getter method for getting filtered item elements\n   * @returns {Array} elems - collection of item elements\n   */\n  proto.getFilteredItemElements = function () {\n    return this.filteredItems.map(function (item) {\n      return item.element;\n    });\n  };\n\n  // -----  ----- //\n\n  return Isotope;\n}));\n\n"]},"metadata":{},"sourceType":"module"}